<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     爱产品，爱前端！
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="../../css/style.css">

  
<script src="../../js/pace.min.js"></script>


  

  

<link rel="alternate" href="atom.xml" title="爱产品，爱前端！" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/diamondto.github.io"
        target="_blank"><img width="149" height="149" src="../../images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="../../index.html">爱产品，爱前端！</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-趣谈HTTPS协议_" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="../../2020/03/07/%E8%B6%A3%E8%B0%88HTTPS%E5%8D%8F%E8%AE%AE_/"
    >趣谈HTTPS协议_</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="../../2020/03/07/%E8%B6%A3%E8%B0%88HTTPS%E5%8D%8F%E8%AE%AE_/" class="article-date">
  <time datetime="2020-03-07T02:14:51.527Z" itemprop="datePublished">2020-03-07</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><h1 id="HTTP传输数据存在的问题"><a href="#HTTP传输数据存在的问题" class="headerlink" title="HTTP传输数据存在的问题"></a>HTTP传输数据存在的问题</h1><h1 id="HTTPS与HTTP的区别"><a href="#HTTPS与HTTP的区别" class="headerlink" title="HTTPS与HTTP的区别"></a>HTTPS与HTTP的区别</h1><h1 id="SSL的加密方式"><a href="#SSL的加密方式" class="headerlink" title="SSL的加密方式"></a>SSL的加密方式</h1><h1 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h1><h1 id="具体配置"><a href="#具体配置" class="headerlink" title="具体配置"></a>具体配置</h1><p>HTTP采用明文传输。明文传输在一些需要保护个人隐私的场景是大忌，比如银行卡卡号和密码的输入，个</p>
<p>人信息的录入等。才用明文传输分分钟钟被不法分子截取下来。</p>
<p>HTTP不验证通信双方的身份。HTTP的状态是无请求的，优点在于解放了服务器，每一次请求“点到为止”不会造成不必要连接占用，缺点在于每次请求会传输大量重复的内容信息。</p>
<p>详细解析一下：无状态指的是任意一个Web请求必须完全与其他请求隔离，当请求端提出请求时，请求本身包含了相应端为相应这一请求所需的全部信息。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。 Http协议不像建立了socket连接的两个终端，双方是可以互相通信的，http的客户端只能通过请求服务器来获取相关内容或文件信息。这也是后来为什么后来HTTP2有了服务器推送的原因！</p>
<p>至于为什么无状态，后面在Cookie和Session中详细分析一下~</p>
<p>HTTP无法验证报文的完整性，报文可能被篡改。</p>
<p>升级版！HTTPS：加密算法</p>
<p>对称加密原理：加密的算法是公开的，密钥来加密数据，对称加密使用一个密钥加密，还要使用相同的密钥才能解密！</p>
<p>常用的算法有：DES,3DES,AES</p>
<p>现在用的比较多的是AES，破解难度大，国外用的比较多。</p>
<p>//使用对称加密，AES加密的时候，密钥长度必须是16个字节，arg0表示要加密的数据，arg1表示要加密的密钥。<br>//解密也是两个参数，arg0和arg1，arg0是要解密的数据，arg1是解密的密钥<br>//方法：AES.decryptFromBase64()</p>
<p>加密之后是一个字符串，服务器解密，这时用户和服务器都有一把一样的钥匙！</p>
<p>优点：</p>
<p>1.计算量较小，加密和解密的速度比较快，适合加密比较大的数据</p>
<p>2.缺点:在传输数据之前，要先传输公钥，可能被中间人劫持，可能会被泄密。</p>
<p>3.当用户很多时，一个用户必须要有唯一的密钥，所以管理起来很麻烦，造成服务器压力巨大。</p>
<p>非对称加密：</p>
<p> 1.算法是公开的，公钥和私钥是配对的，公钥加密只能私钥解密，私钥加密只能公钥解密，简单理解就是用不同的钥匙去开锁，打开和关闭的钥匙是不一样的，所以称非对称~服务器会保存公钥 和私钥 </p>
<p>2.公钥和私钥是通过算法生成的，不能随意乱写！</p>
<p>3.典型方法：RSA  有两个方法   RSA.encrypt     RSA.decrypt  </p>
<p>流程：</p>
<p>服务器发送公钥给用户——&gt;用户采用公钥进行加密——&gt;加密之后传输给服务器——&gt;服务器用私钥进行解密</p>
<p>上述流程中，黑客可能同时拿到公钥和数据，但是公钥是解不了密的！所以黑客解不开这时的数据！</p>
<p>非对称加密的算法RSA</p>
<p>优点:   加密和解密采用不同的钥匙，公钥是可以传输的，但不能解开数据</p>
<p>缺点：计算量比较大，加密和解密的速度比较慢。</p>
<p>那么HTTPS是怎么结合的呢？</p>
<p>对称加密+非对称加密(HTTPS采用这种方式)</p>
<p>使用对称密钥的好处是解密的效率比较快，使用非对称密钥的好处是可以使得传输的内容不能被破解，因为就算你拦截到了数据，但是没有对应的私钥，也是不能破解内容的。</p>
<p>举个例子：你抢到了一个保险柜，但是没有保险柜的钥匙也不能打开保险柜。那我们就将对称加密与非对称加密结合起来,充分利用两者各自的优势，在交换密钥环节使用非对称加密方式，之后的建立通信交换报文阶段则使用对称加密方式。</p>
<p>具体做法是：发送密文的一方使用对方的公钥进行加密处理“对称的密钥”，然后对方用自己的私钥解密拿到“对称的密钥”，这样可以确保交换的密钥是安全的前提下，使用对称加密方式进行通信。所以，HTTPS采用对称加密和非对称加密两者并用的混合加密机制。</p>
<p>但是这样还不够哦！我们聪明的密码学家考虑问题是非常周全的，在实际场景中，会有很多bug~</p>
<p>比如：网络传输过程中需要经过很多中间节点，虽然数据无法被解密，但可能被篡改，那如何校验数据的完整性呢？</p>
<p>画押！—–&gt;校验数字签名。</p>
<p>数字签名有两种功效：</p>
<p>1.能确定消息确实是由发送方签名并发出来的，因为别人假冒不了发送方的签名。</p>
<p>2.数字签名能确定消息的完整性,证明数据是否未被篡改过。</p>
<p>HTTPS工作原理：</p>
<p>1.服务器有公钥和私钥，公钥是传给客户端的，但是不是直接传输，而是先通过SSL数字证书，证书上标注了公钥和服务器的身份标志信息，客户端收到SSL证书之后，拆包，解析出公钥，这时呢，客户端会检查一下服务器的身份，是不是我想要去请求的那个服务器呢？是不是过期了呢？如果没有问题的话，客户端会生成一个随机码，使用公钥进行加密！传输加密之后的数据</p>
<p>2.服务器拿到随机码之后（这时已经被公钥加密了！），这个随机码就可以作为对称加密的密钥，这时服务器就有了数据和私钥 </p>
<p>服务器用私钥进行解密之后，拿到随机码， 这时两端都有了相同的数据，这样的话，双方采用相同的随机码作为对称加密的钥匙！就可以对称的拿到解析之后的数据了，为什么这样？因为传输的时候采用对称加密可以提高速度！</p>
<p>3.详细说明一下：</p>
<p>SSL证书包裹这公钥和服务器的身份标志，为什么带上服务器的标志呢？哈哈，这就是为了防止中间人的劫持，如果你不是正规服务器的话，我就不要你的冒牌货的钥匙！这样客户端就可以防止黑客坑骗拐骗拿到我们的信息啦，不过这只是开始~</p>
<p>假设随机码6666是采用公钥AA加密的，采用对称算法，加密之后生成<strong>***</strong>这种字符串，对称加密保证了传输的速度，但是我们又不想让黑客劫持，所以要引入SSL证书来告诉双方，验证真假美猴王~防止双方都不知道对方身份的情况下，被双向迷惑！猜想一下，黑客是很聪明的，他可能伪装成任何一个角色，如果在客户端这里，他伪装成服务端，采用不正规的钥匙和我们通信，那么我们并不知道身份，会被盗取信息，而在服务端，黑客会假冒成客户端，黑客就是双重身份的冒充人！这样，他获取了双方的信息，随意篡改就很危险！而这个时候我们双方是不知情的，所以SSL很重要！必要要带上身份标志才能辨别好。</p>
<p>随机码就是对陈加密的密钥，客户端采用随机码6666进行对称加密，传输<strong><strong>，服务端拿到</strong></strong>，使用私钥BB解密，拿到随机码6666，再用随机码解密用户的信息，这样就保证了双方的通信。细想这样安全吗？</p>
<p>设想一下，刚开始发送SSL的时候，黑客是可以获取公钥AA的，后来传输加密之后的数据时黑客也可以劫持，拿到*****但是这时，公钥是解不开数据的，因为黑客没有私钥BB。</p>
<p>先发公钥AA给用户—-&gt;用户生成一个随机码6666—–&gt;使用AA加密6666生成<strong><strong>—–&gt;传输</strong></strong>给服务器——&gt;服务器使用私钥BB解密<strong><strong>—–&gt;拿到随机码6666，这个随机码的破解是采用的非对称加密哦，因为都是在双方本地完成解析的，所以相对不用考虑解析算法耗时的问题—–&gt;服务器采用6666随机码解密</strong></strong>，到这里我就明白了，为什么要用随机码来作为对称加密的密钥，这一招厉害了哈哈，这个密钥不仅保证了黑客解不开****，还保证了双方解析用户ID时采用对称算法，减少解密时间的效果~</p>
<p>配置密钥库</p>
<p>1.genkey-alias  生成证书别名</p>
<p>2.keyalg   指定密钥算法，默认RSA</p>
<p>3.keysize  默认1024位。</p>
<p>上面就是我的通俗讲解了~密码学家真的很聪明</p>
<p>官方流程参考：</p>
<p>首先看看组成HTTPS的协议：HTTP协议和SSL/TLS协议。HTTP协议就不用讲了，而SSL/TLS就是负责加密解密等安全处理的模块，所以HTTPS的核心在SSL/TLS上面。整个通信如下：</p>
<p>1、浏览器发起往服务器的443端口发起请求，请求携带了浏览器支持的加密算法和哈希算法。</p>
<p>2、服务器收到请求，选择浏览器支持的加密算法和哈希算法。</p>
<p>3、服务器下将数字证书返回给浏览器，这里的数字证书可以是向某个可靠机构申请的，也可以是自制的。</p>
<p>4、浏览器进入数字证书认证环节，这一部分是浏览器内置的TLS完成的：</p>
<p>4.1 首先浏览器会从内置的证书列表中索引，找到服务器下发证书对应的机构，如果没有找到，此时就会提示用户该证书是不是由权威机构颁发，是不可信任的。如果查到了对应的机构，则取出该机构颁发的公钥。</p>
<p>4.2 用机构的证书公钥解密得到证书的内容和证书签名，内容包括网站的网址、网站的公钥、证书的有效期等。浏览器会先验证证书签名的合法性（验证过程类似上面Bob和Susan的通信）。签名通过后，浏览器验证证书记录的网址是否和当前网址是一致的，不一致会提示用户。如果网址一致会检查证书有效期，证书过期了也会提示用户。这些都通过认证时，浏览器就可以安全使用证书中的网站公钥了。</p>
<p>4.3 浏览器生成一个随机数R，并使用网站公钥对R进行加密。</p>
<p>5、浏览器将加密的R传送给服务器。</p>
<p>6、服务器用自己的私钥解密得到R。</p>
<p>7、服务器以R为密钥使用了对称加密算法加密网页内容并传输给浏览器。 </p>
<p>8、浏览器以R为密钥使用之前约定好的解密算法获取网页内容。</p>
<p>附上SHA算法供大家有兴趣研究~可以脑补一下著名的哈希冲突</p>
<p>安全哈希算法（Secure Hash Algorithm）主要适用于数字签名标准（Digital Signature Standard DSS）里面定义的数字签名算法（Digital Signature Algorithm DSA）。对于长度小于2^64位的消息，SHA1会产生一个160位的消息摘要。该算法经过加密专家多年来的发展和改进已日益完善，并被广泛使用。该算法的思想是接收一段明文，然后以一种不可逆的方式将它转换成一段（通常更小）密文，也可以简单的理解为取一串输入码（称为预映射或信息），并把它们转化为长度较短、位数固定的输出序列即散列值（也称为信息摘要或信息认证代码）的过程。散列函数值可以说是对明文的一种”指纹”或是”摘要”所以对散列值的数字签名就可以视为对此明文的数字签名。</p>
<p>最后补充一下：SSL协议并不是一个应用层协议，它是介于应用层和传输层协议之间的一个安全协议。</p>
<p>枯燥但科学的总结一下：HTTPS=HTTP+加密+身份认证+完整性保护。HTTPS并不是一种新的协议，在通信接口使用了SSL和TLS协议而已。HTTP通常直接和TCP通信，而HTTPS中HTTP先和SSL通信，再由SSL和TCP进行通信。模型如下</p>
<p>HTTPS使用两种加密方式的混合加密<br>对称密钥加密方式的优缺点：</p>
<p>优点：处理速度快<br>缺点：但是容易被第三方盗取<br>非对称密钥加密方式的优缺点：</p>
<p>优点：更加安全，不容易被盗取<br>缺点：处理效率相比对称密钥加密要慢，如果在通信时用这种方式加密，效率很低<br>于是HTTPS采用了两者的优点，使用了混合加密的方式</p>
<p>使用非对称密钥加密的方式安全地交换再稍后对称密钥加密中要使用的密钥<br>确保交换的密钥是安全的之后，放弃非对称密钥加密，使用对称密钥加密来进行通信，保证传输效率<br>HTTPS是怎么解决HTTP协议的三大缺点的？<br>防监听：采用对称加密对数据进行加密，采用非对称加密对对称加密的密钥进行加密<br>防伪装：通信双方携带证书，证书有第三方颁发，很难伪造<br>防篡改：采用摘要算法（MD5或是SHA-1），同样的数据由同样的摘要，而只要有一点不同的数据，它的摘要往往不同，只要数据做了篡改，就会被感知到。</p>
<p>HTTP与HTTPS的区别<br>HTTPS更加安全，因为它有加密，身份认证，验证数据完整性等环节<br>HTTPS需要申请证书，要付费（要钱！一年大概600元）<br>加密通信需要消耗更多的cpu和内存资源，如果每次通信都加密，会消耗很多的资源，当访问量很多的那些网站在进行加密处理时，它们所承担着的负载就很多了，这个时候就需要服务器端实现负载均衡。（有专用的https加解密硬件服务器）<br>使用端口不同，HTTP使用的是80端口，HTTPS使用的是443端口<br>所在层次不同，HTTP运行在TCP之上，HTTPS是运行在SSL/TLS之上的HTTP协议，SSL/TLS运行在TCP之上</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-谈谈Ajax" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="../../2020/03/07/%E8%B0%88%E8%B0%88Ajax/"
    >谈谈Ajax</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="../../2020/03/07/%E8%B0%88%E8%B0%88Ajax/" class="article-date">
  <time datetime="2020-03-07T02:14:51.518Z" itemprop="datePublished">2020-03-07</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>Asynchronous JavaScript and XML，意思是异步JS和XML。<br>解释下异步，异步是相对于同步来说的，同步即同时进行（累积多了就排队，一个一个执行，必须等上一个结束，才能到下一个），而异步就是执行到我了，我去旁边继续执行等结果，后面排队的不用等我结果出来再执行。<br>这是对于ajax的特点来设计的，<strong>因为ajax对后端数据的请求需要时间，</strong>而这个时间不利用起来就是浪费。当然，如果必须要等前一个的结果怎么办，这就使用到JS中的重要部分——回调函数了，其实回调在JS中应用很多，像点击事件执行的就是回调（先绑定事件，只有在点击发生时，才会执行）。那么ajax也一样，先请求数据，只有在状态改变时才会执行接下来的（这个状态包括请求成功和请求失败）。</p>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><p>AJAX 是一种用于创建快速动态网页的技术，对网页的某部分进行更新，不用刷新整个网页。<br>它可以通过在后台与服务器进行少量数据交换，使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。传统的网页（不使用 AJAX）如果需要更新内容，必需重载整个页面。</p>
<h2 id="原理图"><a href="#原理图" class="headerlink" title="原理图"></a>原理图</h2><p>ajax实现的就是浏览器和服务器之间的数据交互。<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWFnZXMyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTM4MzQ4OC8yMDE4MDUvMTM4MzQ4OC0yMDE4MDUxMzIzMDQwMTE1NS0xOTMyNDMyMDgzLnBuZw?x-oss-process=image/format,png" alt="在这里插入图片描述"></p>
<h2 id="核心"><a href="#核心" class="headerlink" title="核心"></a>核心</h2><p>　 XMLHTTPRequest对象，（是对象，就有属性和方法）</p>
<p>　常用的方法：<br>　open(“method”, “url”, “async”)，</p>
<p>　method表示通过什么方式进行服务器访问，包括get和post；</p>
<p>　url表示访问服务器的地址；</p>
<p>　async表示是否异步，包括true和false（注意：true表示异步）。</p>
<pre><code>send(content)，</code></pre><p>　content表示向服务器发送的数据。
　</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">1</span> <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHTTPRequest();</span><br><span class="line"> <span class="number">2</span> </span><br><span class="line"> <span class="number">3</span> xhr.open(<span class="string">"method"</span>, <span class="string">"url"</span>, <span class="string">"async"</span>);</span><br><span class="line"> <span class="number">4</span> </span><br><span class="line"> <span class="number">5</span> xhr.send(<span class="literal">null</span>);</span><br><span class="line"> <span class="number">6</span> </span><br><span class="line"> <span class="number">7</span> xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="number">8</span> </span><br><span class="line"> <span class="number">9</span>     <span class="keyword">if</span>(xhr.readystate == <span class="number">4</span>)&#123;</span><br><span class="line"><span class="number">10</span> </span><br><span class="line"><span class="number">11</span> 　　　<span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line"><span class="number">12</span> </span><br><span class="line"><span class="number">13</span> 　　　　　<span class="built_in">console</span>.log(xhr.responseText)</span><br><span class="line"><span class="number">14</span> </span><br><span class="line"><span class="number">15</span> 　　　&#125;</span><br><span class="line"><span class="number">16</span> </span><br><span class="line"><span class="number">17</span> 　　&#125;</span><br><span class="line"><span class="number">18</span> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="向服务器请求状态的阶段："><a href="#向服务器请求状态的阶段：" class="headerlink" title="向服务器请求状态的阶段："></a>向服务器请求状态的阶段：</h2><p>　　　onreadystatechange表示请求状态改变的事件触发器，</p>
<p>　　　readystate表示请求状态，4表示完成，具体如下表：<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWFnZXMyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTM4MzQ4OC8yMDE4MDUvMTM4MzQ4OC0yMDE4MDUxMzIzMTk0NDc1Mi0xMzA4MzA2MzU3LnBuZw?x-oss-process=image/format,png" alt="在这里插入图片描述"></p>
<h2 id="服务器反馈阶段："><a href="#服务器反馈阶段：" class="headerlink" title="服务器反馈阶段："></a>服务器反馈阶段：</h2><p>　　　status表示http请求状态码，200表示成功，具体如下表：<br>　　　<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWFnZXMyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTM4MzQ4OC8yMDE4MDUvMTM4MzQ4OC0yMDE4MDUxMzIzMzY1NTI1NC0yMTM2ODM3MDA2LnBuZw?x-oss-process=image/format,png" alt="在这里插入图片描述">
　　</p>
<h2 id="避坑"><a href="#避坑" class="headerlink" title="避坑"></a>避坑</h2><p>IE7及其以上版本中支持原生的 XHR 对象，因此可以直接用： var oAjax = new XMLHttpRequest();<br>IE6及其之前的版本中，XHR对象是通过MSXML库中的一个ActiveX对象实现的。使用下面的语句创建： var oAjax=new ActiveXObject(’Microsoft.XMLHTTP’);<br>GET 请求方式是通过<strong>URL参数</strong>将数据提交到服务器的，POST则是通过将数据作为 <strong>send 的参数</strong>提交到服务器；POST 请求中，在发送数据之前，要设置表单提<strong>交的内容类型</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以以下步骤代替上面的open、setRequestHeader、send三行，此处对GET和POST做了很好的区分</span></span><br><span class="line">    <span class="keyword">var</span> params = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> ajaxData.data)&#123;</span><br><span class="line">         params.push(key + <span class="string">"="</span> + ajaxData.data[key]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> sendData = params.join(<span class="string">"&amp;"</span>);</span><br><span class="line">    <span class="keyword">if</span>(ajaxData.type.toUpperCase() == <span class="string">"GET"</span>)&#123;</span><br><span class="line">         xhr.open(ajaxData.type, ajaxData.url + <span class="string">"?"</span> + sendData, ajaxData.async);</span><br><span class="line">         xhr.send(<span class="literal">null</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         xhr.open(ajaxData.type, ajaxData.url, ajaxData.async);</span><br><span class="line">         xhr.setRequestHeader(<span class="string">"Content-type"</span>, <span class="string">"application/x-www-form-urlencoded; charset=utf-8"</span>);</span><br><span class="line">         xhr.send(sendData);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="JQuery中的封装方法"><a href="#JQuery中的封装方法" class="headerlink" title="JQuery中的封装方法"></a>JQuery中的封装方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    type: <span class="string">"GET"</span>,            　　<span class="comment">//访问服务器的方式，GET/POST</span></span><br><span class="line">    url: <span class="string">"test.json"</span>,       　　<span class="comment">//url表示访问的服务器地址</span></span><br><span class="line">    data: &#123;<span class="attr">username</span>: <span class="string">""</span>,     </span><br><span class="line">           content: <span class="string">""</span>&#125;, 　　　 <span class="comment">//data表示传递到后台的数据，使用键值对形式传递</span></span><br><span class="line">    <span class="keyword">async</span>: <span class="literal">true</span>,            　 <span class="comment">//true表示异步，false表示同步</span></span><br><span class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data)</span><br><span class="line">    &#125;,</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="封装成JQuery的形式"><a href="#封装成JQuery的形式" class="headerlink" title="封装成JQuery的形式"></a>封装成JQuery的形式</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$Ajax</span>(<span class="params">opt</span>)</span>&#123;</span><br><span class="line">    opt = opt || &#123;&#125;;</span><br><span class="line">    opt.type = opt.type || <span class="string">"post"</span>;</span><br><span class="line">    opt.url = opt.url || <span class="string">""</span>;</span><br><span class="line">    opt.async = opt.async || <span class="literal">true</span>;</span><br><span class="line">    opt.data = opt.data || <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    opt.success = opt.success || <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">    opt.error = opt.error || <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHTTPRequest();</span><br><span class="line">    <span class="keyword">var</span> params = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> opt.data)&#123;</span><br><span class="line">         params.push(key + <span class="string">"="</span> + opt.data[key]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> sendData = params.join(<span class="string">"&amp;"</span>);</span><br><span class="line">    <span class="keyword">if</span>(opt.type.toUpperCase() == <span class="string">"GET"</span>)&#123;</span><br><span class="line">         xhr.open(opt.type, opt.url + <span class="string">"?"</span> + sendData, opt.async);</span><br><span class="line">         xhr.send(<span class="literal">null</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         xhr.open(opt.type, opt.url, opt.async);</span><br><span class="line">         xhr.setRequestHeader(<span class="string">"Content-type"</span>, <span class="string">"application/x-www-form-urlencoded; charset=utf-8"</span>);</span><br><span class="line">         xhr.send(sendData);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         <span class="keyword">if</span>(xhr.readystate == <span class="number">4</span>)&#123;</span><br><span class="line">              <span class="keyword">if</span>(xhr.status == <span class="number">200</span>)&#123;</span><br><span class="line">                    opt.success &amp;&amp; opt.success(xhr.responseText);  </span><br><span class="line">              &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    opt.error &amp;&amp; xhr.error(xhr.status);</span><br><span class="line">              &#125;</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-数组技巧总结" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="../../2020/03/07/%E6%95%B0%E7%BB%84%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/"
    >数组技巧总结</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="../../2020/03/07/%E6%95%B0%E7%BB%84%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/" class="article-date">
  <time datetime="2020-03-07T02:14:51.491Z" itemprop="datePublished">2020-03-07</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h2 id="map与for-each"><a href="#map与for-each" class="headerlink" title="map与for each"></a>map与for each</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">			<span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">			<span class="comment">//for each 对数组直接进行循环，相当于直接for循环,没有返回值</span></span><br><span class="line">			<span class="comment">//三个参数是item  index arr不是必须的</span></span><br><span class="line">			<span class="comment">// let result = arr.forEach((item,index,arr)=&gt;&#123;</span></span><br><span class="line">			<span class="comment">// 	console.log(item)</span></span><br><span class="line">			<span class="comment">// 	console.log(index)</span></span><br><span class="line">			<span class="comment">// 	console.log(arr)</span></span><br><span class="line">			<span class="comment">// 	return item</span></span><br><span class="line">			<span class="comment">// &#125;)</span></span><br><span class="line">			<span class="comment">//console.log(result)</span></span><br><span class="line">			</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">let</span> arr2 = [<span class="string">'香蕉'</span>,<span class="string">"苹果"</span>,<span class="string">"雪梨"</span>]</span><br><span class="line">			<span class="comment">//map,对数组每一项进行加工，加工完成之后返回1个新的数组！</span></span><br><span class="line">			<span class="comment">// let result2 = arr2.map((item,index,arr)=&gt;&#123;</span></span><br><span class="line">			<span class="comment">// 	let str = index + item + index</span></span><br><span class="line">			<span class="comment">// 	return str</span></span><br><span class="line">			<span class="comment">// &#125;)</span></span><br><span class="line">			<span class="comment">// console.log(result2)</span></span><br><span class="line">			</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">let</span> arr3 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>];</span><br><span class="line">			<span class="comment">//filter过滤，就是将想要的内容进行筛选，不要内容去除，最终返回想要的内容的数组。</span></span><br><span class="line">			<span class="comment">// let result3 = arr3.filter((item,index)=&gt;&#123;</span></span><br><span class="line">			<span class="comment">// 	if(item%2==0)&#123;</span></span><br><span class="line">			<span class="comment">// 		//通过返回true还是false进行选择，true就是想要，false就是去除。</span></span><br><span class="line">			<span class="comment">// 		return true;</span></span><br><span class="line">			<span class="comment">// 	&#125;else&#123;</span></span><br><span class="line">			<span class="comment">// 		return false;</span></span><br><span class="line">			<span class="comment">// 	&#125;</span></span><br><span class="line">			<span class="comment">// &#125;)</span></span><br><span class="line">			<span class="comment">// console.log(result3)</span></span><br><span class="line">			</span><br><span class="line">			<span class="comment">//reduce,是对整个数组进行整合，比如要将数组里所有的数字进行相加</span></span><br><span class="line">			<span class="comment">//将数组每一项内容整合后，返回1个内容</span></span><br><span class="line">			<span class="keyword">let</span> arr4 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>];</span><br><span class="line">			<span class="keyword">let</span> result4 =arr4.reduce(<span class="function">(<span class="params">pre,next,index</span>)=&gt;</span>&#123;</span><br><span class="line">				<span class="built_in">console</span>.log(pre);</span><br><span class="line">				<span class="built_in">console</span>.log(next);</span><br><span class="line">				<span class="built_in">console</span>.log(index)</span><br><span class="line">				<span class="keyword">return</span> pre+next</span><br><span class="line">			&#125;,<span class="number">0</span>)</span><br><span class="line">			<span class="built_in">console</span>.log(result4)</span><br><span class="line">			</span><br><span class="line">			</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//for...in...主要用于遍历对象的，不适用于遍历数组,for(key in obj),里面的每项是key</span></span><br><span class="line">			<span class="comment">//for...of...可以用来遍历数组，类数组的对象，字符串，set/map,generator。</span></span><br><span class="line">			<span class="comment">//for(item of arr),里面的是每一项</span></span><br><span class="line">			<span class="comment">//map() 方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。</span></span><br><span class="line">			</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">let</span> obj = &#123;</span><br><span class="line">				name:<span class="string">"老陈"</span>,</span><br><span class="line">				type:<span class="string">"帅"</span>,</span><br><span class="line">				content:<span class="string">"前端"</span></span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">for</span>(key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">"key："</span>+key+<span class="string">";value:"</span>+obj[key])</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">let</span> arr5 = [<span class="string">"范冰冰"</span>,<span class="string">"李晨"</span>,<span class="string">"鹿晗"</span>]</span><br><span class="line">			<span class="comment">//for of循环的是每一项的内容</span></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> arr5)&#123;</span><br><span class="line">				<span class="built_in">console</span>.log(item)</span><br><span class="line">			&#125;</span><br><span class="line">		&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h2><p>这是一个非常流行的关于Javascript数组的采访问题，数组去重。这里有一个快速简单的解决方案，可以使用一个新的Set()。我想向您展示两种可能的方法，一种是使用.from()方法，另一种是使用spread操作符(…)。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">"banana"</span>, <span class="string">"apple"</span>, <span class="string">"orange"</span>, <span class="string">"watermelon"</span>, <span class="string">"apple"</span>, <span class="string">"orange"</span>, <span class="string">"grape"</span>, <span class="string">"apple"</span>];</span><br><span class="line"> </span><br><span class="line"><span class="comment">// First method</span></span><br><span class="line"><span class="keyword">var</span> uniqueFruits = <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(fruits));</span><br><span class="line"><span class="built_in">console</span>.log(uniqueFruits); </span><br><span class="line"><span class="comment">// returns ["banana", "apple", "orange", "watermelon", "grape"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Second method</span></span><br><span class="line"><span class="keyword">var</span> uniqueFruits2 = […<span class="keyword">new</span> <span class="built_in">Set</span>(fruits)];</span><br><span class="line"><span class="built_in">console</span>.log(uniqueFruits2); </span><br><span class="line"><span class="comment">// returns ["banana", "apple", "orange", "watermelon", "grape"]</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>替换数组中的特定值<br>有时在创建代码时需要替换数组中的特定值，有一种很好的简单的方法可以做到这一点，我们可以使用.splice(start、valueToRemove、valueToAdd)，并将所有三个参数传递给它，这些参数可以指定我们希望从哪里开始修改、希望修改多少值和新值。</li>
</ol>
<p>var fruits = [“banana”, “apple”, “orange”, “watermelon”, “apple”, “orange”, “grape”, “apple”];<br>fruits.splice(0, 2, “potato”, “tomato”);<br>console.log(fruits);<br>// returns [“potato”, “tomato”, “orange”, “watermelon”, “apple”, “orange”, “grape”, “apple”]<br>3. 没有map()的映射数组<br>也许每个人都知道数组的map()方法，但是有一个不同的解决方案，它可以用来获得类似的效果和非常干净的代码。我们可以使用.from()方法。</p>
<p>var friends = [<br>    { name: “John”, age: 22 },<br>    { name: “Peter”, age: 23 },<br>    { name: “Mark”, age: 24 },<br>    { name: “Maria”, age: 22 },<br>    { name: “Monica”, age: 21 },<br>    { name: “Martha”, age: 19 },<br>]</p>
<p>var friendsNames = Array.from(friends, ({name}) =&gt; name);<br>console.log(friendsNames);<br>// returns [“John”, “Peter”, “Mark”, “Maria”, “Monica”, “Martha”]<br>4. 空数组<br>您是否有一个满是元素的数组，但是您需要出于任何目的对其进行清理，并且您不想逐个删除项? 很容易就可以在一行代码中完成。要清空一个数组，您需要将数组的长度设置为0，就是这样!</p>
<p>var fruits = [“banana”, “apple”, “orange”, “watermelon”, “apple”, “orange”, “grape”, “apple”];</p>
<p>fruits.length = 0;<br>console.log(fruits);<br> // returns []</p>
<h2 id="将数组转换为对象"><a href="#将数组转换为对象" class="headerlink" title="将数组转换为对象"></a>将数组转换为对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spread运算符(…)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">"banana"</span>, <span class="string">"apple"</span>, <span class="string">"orange"</span>, <span class="string">"watermelon"</span>];</span><br><span class="line"><span class="keyword">var</span> fruitsObj = &#123; …fruits &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(fruitsObj);</span><br><span class="line"><span class="comment">// returns &#123;0: "banana", 1: "apple", 2: "orange", 3: "watermelon", 4: "apple", 5: "orange", 6: "grape", 7: "apple"&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="用数据填充数组"><a href="#用数据填充数组" class="headerlink" title="用数据填充数组"></a>用数据填充数组</h2><p>在某些情况下，当创建一个数组时，希望用一些数据来填充它，或者需要一个具有相同值的数组，在这种情况下使用fill()方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newArray = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>).fill(<span class="string">"1"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(newArray); </span><br><span class="line"><span class="comment">// returns ["1", "1", "1", "1", "1", "1", "1", "1", "1", "1", "1"]</span></span><br></pre></td></tr></table></figure>

<h2 id="合并数组"><a href="#合并数组" class="headerlink" title="合并数组"></a>合并数组</h2><p>.concat()方法或spread操作符(…)在处理数组时非常有用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"orange"</span>];</span><br><span class="line"><span class="keyword">var</span> meat = [<span class="string">"poultry"</span>, <span class="string">"beef"</span>, <span class="string">"fish"</span>];</span><br><span class="line"><span class="keyword">var</span> vegetables = [<span class="string">"potato"</span>, <span class="string">"tomato"</span>, <span class="string">"cucumber"</span>];</span><br><span class="line"><span class="keyword">var</span> food = […fruits, …meat, …vegetables];</span><br><span class="line"><span class="built_in">console</span>.log(food); </span><br><span class="line"><span class="comment">// ["apple", "banana", "orange", "poultry", "beef", "fish", "potato", "tomato", "cucumber"]</span></span><br></pre></td></tr></table></figure>

<h2 id="求两个数组的交集"><a href="#求两个数组的交集" class="headerlink" title="求两个数组的交集"></a>求两个数组的交集</h2><blockquote>
<p>为了找到两个数组的交集，以确保数组中的值不重复，使用.filter方法和.include方法。最后，将得到两个数组的交集。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numOne = [<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">8</span>];</span><br><span class="line"><span class="keyword">var</span> numTwo = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">var</span> duplicatedValues = […<span class="keyword">new</span> <span class="built_in">Set</span>(numOne)].filter(<span class="function"><span class="params">item</span> =&gt;</span> numTwo.includes(item));</span><br><span class="line"><span class="built_in">console</span>.log(duplicatedValues); </span><br><span class="line"><span class="comment">// returns [2, 4, 6]</span></span><br></pre></td></tr></table></figure>

<h2 id="从数组中删除假值"><a href="#从数组中删除假值" class="headerlink" title="从数组中删除假值"></a>从数组中删除假值</h2><blockquote>
<p>在Javascript中，假值是false, 0， “ “， null, NaN, undefined  使用.filter()方法。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mixedArr = [<span class="number">0</span>, <span class="string">"blue"</span>, <span class="string">""</span>, <span class="literal">NaN</span>, <span class="number">9</span>, <span class="literal">true</span>, <span class="literal">undefined</span>, <span class="string">"white"</span>, <span class="literal">false</span>];</span><br><span class="line"><span class="keyword">var</span> trueArr = mixedArr.filter(<span class="built_in">Boolean</span>);</span><br><span class="line"><span class="built_in">console</span>.log(trueArr); </span><br><span class="line"><span class="comment">// returns ["blue", 9, true, "white"]</span></span><br></pre></td></tr></table></figure>

<h2 id="从数组中获取随机值"><a href="#从数组中获取随机值" class="headerlink" title="从数组中获取随机值"></a>从数组中获取随机值</h2><blockquote>
<p>有时需要从数组中随机选择一个值。要以一种简单、快速、简短的方式创建它，并保持代码整洁，可以根据数组长度获得一个随机索引号。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = [<span class="string">"blue"</span>, <span class="string">"white"</span>, <span class="string">"green"</span>, <span class="string">"navy"</span>, <span class="string">"pink"</span>, <span class="string">"purple"</span>, <span class="string">"orange"</span>, <span class="string">"yellow"</span>, <span class="string">"black"</span>, <span class="string">"brown"</span>];</span><br><span class="line"><span class="keyword">var</span> randomColor = colors[(<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (colors.length + <span class="number">1</span>)))]</span><br></pre></td></tr></table></figure>

<h2 id="数组反转"><a href="#数组反转" class="headerlink" title="数组反转"></a>数组反转</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> colors = [<span class="string">"blue"</span>, <span class="string">"white"</span>, <span class="string">"green"</span>, <span class="string">"navy"</span>, <span class="string">"pink"</span>, <span class="string">"purple"</span>, <span class="string">"orange"</span>, <span class="string">"yellow"</span>, <span class="string">"black"</span>, <span class="string">"brown"</span>];</span><br><span class="line"><span class="keyword">var</span> reversedColors = colors.reverse();</span><br><span class="line"><span class="built_in">console</span>.log(reversedColors); </span><br><span class="line"><span class="comment">// returns ["brown", "black", "yellow", "orange", "purple", "pink", "navy", "green", "white", "blue"]</span></span><br></pre></td></tr></table></figure>

<h2 id="lastIndexOf-方法"><a href="#lastIndexOf-方法" class="headerlink" title="lastIndexOf()方法"></a>lastIndexOf()方法</h2><blockquote>
<p>允许查找给定元素的最后一次出现的索引。例如，数组有重复的值，可以找到它最后一次出现的位置。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> nums = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">7</span>];</span><br><span class="line"><span class="keyword">var</span> lastIndex = nums.lastIndexOf(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">console</span>.log(lastIndex); </span><br><span class="line"><span class="comment">// returns 9</span></span><br></pre></td></tr></table></figure>

<h2 id="将数组中的所有值相加"><a href="#将数组中的所有值相加" class="headerlink" title="将数组中的所有值相加"></a>将数组中的所有值相加</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> nums = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">var</span> sum = nums.reduce(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y);</span><br><span class="line"><span class="built_in">console</span>.log(sum); </span><br><span class="line"><span class="comment">// returns 14</span></span><br></pre></td></tr></table></figure>

<h2 id="易混辨析"><a href="#易混辨析" class="headerlink" title="易混辨析"></a>易混辨析</h2><p>比如有一个数组a=[1,2,3,4]，还有一个对象a={0:1,1:2,2:3,3:4}，然后运行alert(a[1])，两种情况下的运行结果是相同的！这就是说，数据集合既可以用数组表示，也可以用对象表示，那么我到底该用哪一种呢？<br><strong>数组表示有序数据的集合，而对象表示无序数据的集合。如果数据的顺序很重要，就用数组，否则就用对象。</strong><br>当然，数组和对象的另一个区别是，数组的数据没有”名称”（name），对象的数据有”名称”（name）。<br>但是问题是，很多编程语言中，都有一种叫做”关联数组”（associative array）的东西。这种数组中的数据是有名称的。<br>但是在《javascript DOM》中，不推荐我们使用 关联数组！</p>
<blockquote>
<p><strong>判断一个对象是不是数组类型最可靠的方法是这两种:<br>Object. prototype.toString.call(obj)===[ object Array]和Array. isArray(obj)。</strong></p>
</blockquote>
<p>原因：typeof 检查基本数据类型是可以的，但不准确。<br>Array.isArray() 用于确定传递的值是否是一个 Array。如果对象是 Array，则为true; 否则为false.这个是可以的！<br> <strong>所有 函数的原型对象默认是OBJECT的实例，但OBJECT除外。Function 函数是new自己产生的。</strong><br>但是！bug问题就是研究不深入啊啊啊啊啊啊，作为程序媛，我有点难~<br>A  instance of   B不准确！因为原型链可以改变，只要B构造函数的显示原型对象protptype在左边A的原型链上可以找到就返回TRUE。只要在A 的原型链上找到了B的prototype,，就可以,任何一个就可以说明A是B的一个实例。<br>这种方法有一个问题，就是验证不够严格。 如果对象创建时不是使用数组创建的，但是只要原型链上有数组类型，也认为是数组，如下面一段代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">Test.prototype = <span class="built_in">Array</span>.prototype;</span><br><span class="line"><span class="keyword">let</span> test = <span class="keyword">new</span> Test();</span><br><span class="line">test <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Object. prototype.toString.call(obj)===[ object Array]原理是根据对象的class属性(类属性)，跨原型链调用toString()方法。<br><code>Object.prototype.toString.call(new Date());   //&quot;[object Date]&quot;
Object.prototype.toString.call(Window);       //&quot;[object window]&quot;
Object.prototype.toString.call(/./);          //&quot;[object RegExp]&quot;</code></p>
</blockquote>
<p>解释一下，在js中一个对象一旦被创建，在内部会携带创建对象的类型名，一旦创建就不能被修改了。那么怎么获取这个对象的类型名呢？所谓”纯粹的对象”，就是说该对象是通过”{}“或”new Object”创建的。<br>js中提供了调用对象原型中的toString方法， Object.prototype.toString.call(obj)。因为很多对象继承的toString（）方法被重写了，为了能够调用正确的toString（）版本，也就是最原始的版本。可以使用Function.call()的方法。<br>其中call可以这么理解，相当于obj去借用这个 Object.prototype.toString()<br><strong>举个栗子~</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;,</span><br><span class="line">arr = [];</span><br><span class="line"></span><br><span class="line">obj <span class="keyword">instanceof</span> <span class="built_in">Array</span>	<span class="comment">//false</span></span><br><span class="line">obj <span class="keyword">instanceof</span> <span class="built_in">Object</span>	<span class="comment">//true</span></span><br><span class="line">arr <span class="keyword">instanceof</span> <span class="built_in">Array</span>	<span class="comment">//true</span></span><br><span class="line">arr <span class="keyword">instanceof</span> <span class="built_in">Object</span>	<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">constructor</span></span><br><span class="line">var obj = &#123;&#125;,</span><br><span class="line">arr = [];</span><br><span class="line"></span><br><span class="line">obj.constructor === <span class="built_in">Object</span>	<span class="comment">//true</span></span><br><span class="line">arr.constructor === <span class="built_in">Object</span>	<span class="comment">//false</span></span><br><span class="line">obj.constructor === <span class="built_in">Array</span>	<span class="comment">//true！</span></span><br><span class="line">arr.constructor === <span class="built_in">Array</span>	<span class="comment">//false</span></span><br></pre></td></tr></table></figure>



      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-前端的单页面模式和多页面模式" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="../../2020/03/07/%E5%89%8D%E7%AB%AF%E7%9A%84%E5%8D%95%E9%A1%B5%E9%9D%A2%E6%A8%A1%E5%BC%8F%E5%92%8C%E5%A4%9A%E9%A1%B5%E9%9D%A2%E6%A8%A1%E5%BC%8F/"
    >前端的单页面模式和多页面模式</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="../../2020/03/07/%E5%89%8D%E7%AB%AF%E7%9A%84%E5%8D%95%E9%A1%B5%E9%9D%A2%E6%A8%A1%E5%BC%8F%E5%92%8C%E5%A4%9A%E9%A1%B5%E9%9D%A2%E6%A8%A1%E5%BC%8F/" class="article-date">
  <time datetime="2020-03-07T02:14:51.481Z" itemprop="datePublished">2020-03-07</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h2 id="思考动机"><a href="#思考动机" class="headerlink" title="思考动机"></a>思考动机</h2><p>前端部分的搭建，需要考虑使用哪种模式进行页面之间的跳转交互，<br>而项目内的页面交互，不可避免的需要相互之间的数据共享。</p>
<h2 id="模式选择"><a href="#模式选择" class="headerlink" title="模式选择"></a>模式选择</h2><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWFnZXMyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTM4MzQ4OC8yMDE4MDcvMTM4MzQ4OC0yMDE4MDcxMjE3NDAwNTA3NS0xMjA1MTA1OTMzLnBuZw?x-oss-process=image/format,png" alt="在这里插入图片描述"></p>
<blockquote>
<p>单页面模式（SPA  Single-page Application）：<br>只有一张Web页面的应用，是一种从Web服务器加载的富客户端，单页面跳转仅刷新局部资源 ，公共资源(js、css等)仅需加载一次<br>页面跳转：使用js中的append/remove或者show/hide的方式来进行页面内容的更换,或者使用框架。<br>数据传递：可通过全局变量或者参数传递，进行相关数据交互<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWFnZXMyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTM4MzQ4OC8yMDE4MDcvMTM4MzQ4OC0yMDE4MDcxMjE3NDAwNTA3NS0xMjA1MTA1OTMzLnBuZw?x-oss-process=image/format,png" alt="在这里插入图片描述"><br>多页面模式（MPA  Multi-page Application）：<br>多页面跳转需要刷新所有资源，每个公共资源(js、css等)需选择性重新加载<br>页面跳转：使用window.location.href = “./index.html”进行页面间的跳转；<br>数据传递：可以使用path?account=”123”&amp;password=””路径携带数据传递的方式，或者localstorage、cookie等存储方式</p>
</blockquote>
<blockquote>
<p>总结：<br>单页面模式：相对比较有优势，无论在用户体验还是页面切换的数据传递、页面切换动画，都可以有比较大的操作空间<br>多页面模式：比较适用于页面跳转较少，数据传递较少的项目中开发，否则使用cookie，localstorage进行数据传递，性能很不好。</p>
</blockquote>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-关于原型的理解" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="../../2020/03/07/%E5%85%B3%E4%BA%8E%E5%8E%9F%E5%9E%8B%E7%9A%84%E7%90%86%E8%A7%A3/"
    >关于原型的理解</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="../../2020/03/07/%E5%85%B3%E4%BA%8E%E5%8E%9F%E5%9E%8B%E7%9A%84%E7%90%86%E8%A7%A3/" class="article-date">
  <time datetime="2020-03-07T02:14:51.476Z" itemprop="datePublished">2020-03-07</time>
</a>
      
      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h2 id="关于原型的理解"><a href="#关于原型的理解" class="headerlink" title="关于原型的理解"></a>关于原型的理解</h2><p>在这里我解析一下obj.constructor === Array  JS中一切皆对象！<br>注意：JavaScript中没有类（class）的概念，取而代之的是构造函数，两者类似却又有很大的差别。<br>构造函数的prototype指向原型对象，同时，原型对象有constructor指回构造函数对象。<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly90aW1nc2EuYmFpZHUuY29tL3RpbWc_aW1hZ2UmcXVhbGl0eT04MCZzaXplPWI5OTk5XzEwMDAwJnNlYz0xNTgzMjUwNDI5NjY5JmRpPTJjZDEwYmNhZTU0YjY2NzVmMjY3NzQ1N2FjMjViMWQ1JmltZ3R5cGU9MCZzcmM9aHR0cDovL3d3dy5md3F0Zy5uZXQvd3AtY29udGVudC91cGxvYWRzLzIwMTYvMDQvODgzODA1LTIwMTYwNDI2MTYyMTQ2NDg2LTIwODc5NTYxMTkucG5n?x-oss-process=image/format,png" alt="在这里插入图片描述"></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly90aW1nc2EuYmFpZHUuY29tL3RpbWc_aW1hZ2UmcXVhbGl0eT04MCZzaXplPWI5OTk5XzEwMDAwJnNlYz0xNTgzMjUwNDQ0OTgwJmRpPTE0NTJlMjFiMDA2YTc1ZjQ1OGE2OTZjNWU2NzA2ZDI1JmltZ3R5cGU9anBnJnNyYz1odHRwOi8vaW1nMy5pbWd0bi5iZGltZy5jb20vaXQvdT0yNDEyNzA0MjQ4LDEyOTQyNjQzNDYmZm09MjE0JmdwPTAuanBn?x-oss-process=image/format,png" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">this</span>.name = name;</span><br><span class="line"> <span class="keyword">this</span>.age = age;</span><br><span class="line"> <span class="keyword">this</span>.eat= <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(<span class="string">'吃西红柿'</span>) &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">'小米'</span>, <span class="number">28</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person(<span class="string">'大米'</span>, <span class="number">23</span>);</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTM4MzQ4OC8yMDE4MTIvMTM4MzQ4OC0yMDE4MTIyNjIxNTAxMDM4My00NDMyNTAyMzQucG5n?x-oss-process=image/format,png" alt="在这里插入图片描述"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTM4MzQ4OC8yMDE4MTIvMTM4MzQ4OC0yMDE4MTIyNjIxNTAzNzM2NC04Mjk4NTA3Ni5wbmc?x-oss-process=image/format,png" alt="在这里插入图片描述"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTM4MzQ4OC8yMDE4MTIvMTM4MzQ4OC0yMDE4MTIyNjIxNTEwMDMzMi0xNjAxMjA3MzU1LnBuZw?x-oss-process=image/format,png" alt="在这里插入图片描述"><br>上图分别是：</p>
<p>图一打印perspn1实例对象，<br>图二打印Person构造函数，<br>图三打印构造函数的prototype（即Person的原型对象）和person1的<strong>proto</strong></p>
<blockquote>
<p>实例对象和构造函数一点也不像<br>person1.<strong>proto</strong>和Person.prototype一模一样<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTM4MzQ4OC8yMDE4MTIvMTM4MzQ4OC0yMDE4MTIyNjIzMDAzMzQyMy05NjEwOTc5OTUucG5n?x-oss-process=image/format,png" alt="在这里插入图片描述"></p>
</blockquote>
<p>在java中，类和它的实例对象之间有很紧密的关系，你的（属性和方法）是我的，我的还是我的！<br>可是到了js这里，Person构造函数中并没有体现出他本该有的属性和方法<br>也就是说，无论我们实例化出来多少个person，他们的属性和方法都是不一样的。<br>属性不一样还可以理解，方法不一样就意味着：每个实例出来的person的方法并不是共用的（并不指向同一个地址空间），那我们要构造函数还有什么意义？ </p>
<blockquote>
<p>因为构造函数加原型可以达到JAVA中类和实例的优点：能够共享数据，节省内存空间<br>使用原型对象造共用属性和方法<br>构造函数中定义的方法，实例化后并不一样，而原型对象prototype中定义的方法确实相等的（指向同一地址）<br>JS中给同一构造函数的实例对象 添加共用属性和方法，需要使用prototype这一属性，也就是原型对象来实现<br>实例对象的<strong>proto</strong>和构造函数的prototype相等（指向同一地址），完全一样<br>Person.prototype.constructor和person1.<strong>proto</strong>.constructor以及Person一模一样<br>Person.prototype.constructor === Person<br>即：构造函数的原型对象（prototype）的构造器（constructor）指向该构造函数</p>
</blockquote>
<p>敲重点！</p>
<blockquote>
<p>实例对象中都有<strong>proto</strong>属性，而构造函数中都有prototype属性，<br>prototype和<strong>proto</strong>都有构造器constructor，其实实例对象的<strong>proto</strong>和构造函数的prototype是一样的（Person.prototype === person1.<strong>proto</strong>）<br>构造函数的原型对象（prototype）的构造器（constructor）指向该构造函数（Person.prototype.constructor === Person）<br>！！原型属性和方法统一定义时，需要定义构造器constructor，即将构造函数的原型对象中的构造器指向该构造函数，否则原型属性和方法定义失败</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加原型方法</span></span><br><span class="line">Person.prototype.job= <span class="string">"程序员"</span></span><br><span class="line">Person.prototype.address = <span class="string">"苏州"</span> </span><br><span class="line">Person.prototype.study= <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(<span class="string">"学JavaScript"</span>)&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以这样定义吗？</span></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">    job:  <span class="string">"程序员"</span>,</span><br><span class="line">    address: <span class="string">"苏州"</span> ,</span><br><span class="line">    study:  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; alert(<span class="string">"学JavaScript"</span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//上面的原型对象定义出错，需要加上constructor--手动修改构造器的指向</span></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">    <span class="keyword">constructor</span>: Person,</span><br><span class="line">    job:  "程序员",</span><br><span class="line">    address: "苏州" ,</span><br><span class="line">    study:  function() &#123; alert(<span class="string">"学JavaScript"</span>)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTM4MzQ4OC8yMDE4MTIvMTM4MzQ4OC0yMDE4MTIyNzAwMTUxMjcxMi0xNDg0ODc2ODEzLnBuZw?x-oss-process=image/format,png" alt="在这里插入图片描述"></p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-爬虫获取实时疫情数据并制作可视化表格" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="../../2020/02/25/%E7%88%AC%E8%99%AB%E8%8E%B7%E5%8F%96%E5%AE%9E%E6%97%B6%E7%96%AB%E6%83%85%E6%95%B0%E6%8D%AE%E5%B9%B6%E5%88%B6%E4%BD%9C%E5%8F%AF%E8%A7%86%E5%8C%96%E8%A1%A8%E6%A0%BC/"
    >疫情地图</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="../../2020/02/25/%E7%88%AC%E8%99%AB%E8%8E%B7%E5%8F%96%E5%AE%9E%E6%97%B6%E7%96%AB%E6%83%85%E6%95%B0%E6%8D%AE%E5%B9%B6%E5%88%B6%E4%BD%9C%E5%8F%AF%E8%A7%86%E5%8C%96%E8%A1%A8%E6%A0%BC/" class="article-date">
  <time datetime="2020-02-24T16:00:00.000Z" itemprop="datePublished">2020-02-25</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="../../categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E6%9E%B6%E6%9E%84/">框架与架构</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>Welcome to share creative thoughts!学校的服务器连不上了，实验跑不起来，回顾一下学习的知识，结合爬虫技术，制作一下疫情数据可视化表格，希望疫情快点好起来吧！我想早点做实验，马上要找实习了，时间太紧张啦！</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> jsonData <span class="keyword">from</span> <span class="string">'./feiyan.json'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./06style.css'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(jsonData)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> provincesObj = &#123;</span><br><span class="line">    <span class="comment">//做一个数组列表，格式化得到的信息，每个省份是一个对象，设置里面的属性和值</span></span><br><span class="line">    <span class="comment">// "湖北省":&#123;</span></span><br><span class="line">    <span class="comment">//     confirm:0,</span></span><br><span class="line">    <span class="comment">//     suspect:0,</span></span><br><span class="line">    <span class="comment">//     heal:0,</span></span><br><span class="line">    <span class="comment">//     deal:0,</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;<span class="comment">//数组循环遍历，有索引值和元素，统计数据，拿province作为key,初始化为0，统计确诊，痊愈，死亡人数</span></span><br><span class="line"></span><br><span class="line">jsonData.data.list.forEach(<span class="function">(<span class="params">item,i</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(provincesObj[item.province]==<span class="literal">undefined</span>)&#123;</span><br><span class="line">        provincesObj[item.province] = &#123;</span><br><span class="line">            confirm:<span class="number">0</span>,</span><br><span class="line">            heal:<span class="number">0</span>,</span><br><span class="line">            dead:<span class="number">0</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">//初始化之后，加入数据，一开始是undefined,默认为0,判断这个省份是否存在</span></span><br><span class="line">     <span class="comment">//为null就设为0</span></span><br><span class="line">    item.confirm = item.confirm?item.confirm:<span class="number">0</span>;</span><br><span class="line">    item.heal = item.heal?item.heal:<span class="number">0</span>;</span><br><span class="line">    item.dead = item.dead?item.dead:<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    provincesObj[item.province] = &#123;</span><br><span class="line">        confirm:provincesObj[item.province].confirm+item.confirm,</span><br><span class="line">        heal:provincesObj[item.province].heal+item.heal,</span><br><span class="line">        dead:provincesObj[item.province].dead+item.dead</span><br><span class="line">    &#125;<span class="comment">//累加</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> provinceList = []<span class="comment">//加入数据，</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> provincesObj) &#123;</span><br><span class="line">    provincesObj[key].province = key;<span class="comment">//哪个省份</span></span><br><span class="line">    provinceList.push(provincesObj[key])<span class="comment">//具体人数</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//放入数据</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(provincesObj)</span><br><span class="line"><span class="built_in">console</span>.log(provinceList)</span><br><span class="line"></span><br><span class="line"><span class="comment">//排序</span></span><br><span class="line"><span class="keyword">let</span> provinceListSort = provinceList.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.confirm&lt;b.confirm)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)<span class="comment">//保证确证人数在最顶端，生成新的列表有顺序</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(provinceListSort)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bili</span>  <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props)&#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="comment">//渲染模板</span></span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;h1&gt;中国病例&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">                &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;li&gt;</span></span><br><span class="line"><span class="regexp">                        &lt;span&gt;地区&lt;/</span>span&gt;</span><br><span class="line">                        &lt;span&gt;确诊&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">                        &lt;span&gt;死亡&lt;/</span>span&gt;</span><br><span class="line">                        &lt;span&gt;治愈&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>li&gt;</span><br><span class="line"></span><br><span class="line">                    &#123;<span class="comment">//传入数据，返回最终的表格</span></span><br><span class="line">                        <span class="keyword">this</span>.props.list.map(<span class="function">(<span class="params">item,index</span>)=&gt;</span>&#123;</span><br><span class="line">                            <span class="keyword">return</span> (</span><br><span class="line">                                &lt;li&gt;</span><br><span class="line">                                    &lt;span&gt;&#123;item.province&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">                                    &lt;span&gt;&#123;item.confirm&#125;&lt;/</span>span&gt;</span><br><span class="line">                                    &lt;span&gt;&#123;item.dead&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">                                    &lt;span&gt;&#123;item.heal&#125;&lt;/</span>span&gt;</span><br><span class="line">                                &lt;<span class="regexp">/li&gt; </span></span><br><span class="line"><span class="regexp">                            )</span></span><br><span class="line"><span class="regexp">                        &#125;)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">                    &#125;</span></span><br><span class="line"><span class="regexp">                &lt;/u</span>l&gt;</span><br><span class="line">            &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render(</span></span><br><span class="line"><span class="regexp">    &lt;Bili list=&#123;provinceListSort&#125;&gt;&lt;/</span>Bili&gt;,</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'#root'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>CSS部分</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ul,li&#123;</span><br><span class="line">    list-style: none;</span><br><span class="line">    margin: <span class="number">0</span>;</span><br><span class="line">    padding: <span class="number">5</span>px <span class="number">5</span>px;</span><br><span class="line">&#125;</span><br><span class="line">li&#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    <span class="comment">/*设置flex布局*/</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">span&#123;</span><br><span class="line">    flex: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li:nth-child(odd)&#123;<span class="comment">/*奇数选择器*/</span></span><br><span class="line">    background-color: #efefef;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>爬虫部分</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> axios = <span class="built_in">require</span>(<span class="string">'axios'</span>);<span class="comment">//后端用require!</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> httpUrl = <span class="string">'https://c.m.163.com/ug/api/wuhan/app/index/feiyan-data-list?t='</span></span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> axios.get(httpUrl+<span class="keyword">new</span> <span class="built_in">Date</span>().getTime())<span class="comment">//加入时间戳，实时获取</span></span><br><span class="line">    <span class="built_in">console</span>.log(res.data)</span><br><span class="line">&#125;)()</span><br><span class="line"><span class="comment">//异步自执行函数,等待获取数据</span></span><br></pre></td></tr></table></figure>


      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/%E9%A1%B9%E7%9B%AE%E6%80%9D%E8%80%83/" rel="tag">项目思考</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/%E9%AB%98%E5%B9%B6%E5%8F%91/" rel="tag">高并发</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-弄潮儿PWA" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="../../2020/02/23/%E5%BC%84%E6%BD%AE%E5%84%BFPWA/"
    >弄潮儿PWA</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="../../2020/02/23/%E5%BC%84%E6%BD%AE%E5%84%BFPWA/" class="article-date">
  <time datetime="2020-02-22T16:00:00.000Z" itemprop="datePublished">2020-02-23</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="../../categories/PWA/">PWA</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>Welcome to share creative thoughts!</p>
<h2 id="PWA产生背景"><a href="#PWA产生背景" class="headerlink" title="PWA产生背景"></a>PWA产生背景</h2><p>号称下一代web应用模型的PWA，逐渐成为了一个各大前端厂商争先恐后进行涉足，布局的一个新的技术！<br>其主要的对标物Native app，作为现在最主流的mobile端应用，它的安全，性能，用户体验的确明显领先于其他互联网载体，原生App始终有一些缺点</p>
<ol>
<li>昂贵开发成本</li>
<li>软件上线，版本更新都需要发布到不同的商店，并通过审核<br>有些APP可能使用频率特别少，但是还是不得不去商店中下载庞大安装包，或者可能一段时间不使用以后，随着版本的更新，也不得不去重新更新并安装。<br>PWA技术的作为web应用，其天生优势能很好的解决以上的问题。<br>PWA就是在移动端利用提供的<strong>标准化框架，</strong>在网页应用中实现和原生应用相近的用户体验的<strong>渐进式网页应用</strong>。</li>
</ol>
<h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ol>
<li>可靠——即时加载，即使在不确定的网络条件下也不会受到影响。<br>当用户从主屏幕启动时，service work可以立即加载渐进式Web应用程序，完全不受网络环境的影响。service work就像一个客户端代理，它控制缓存以及如何响应资源请求逻辑，通过预缓存关键资源，可以消除对网络的依赖，确保为用户提供即时可靠的体验。</li>
<li>快速——据统计，如果站点加载时间超过 3s，53% 的用户会放弃等待。页面展现之后，用户期望有平滑的体验，过渡动画和快速响应，针对网页渲染和网络数据访问有较好优化。</li>
<li>沉浸式体验—— 感觉就像设备上的原生应用程序，具有沉浸式的用户体验。<br>渐进式Web应用程序可以安装并在用户的主屏幕上，无需从应用程序商店下载安装。他们提供了一个沉浸式的全屏幕体验，甚至可以重新与用户接触的Web推送通知。</li>
</ol>
<p><strong>PWA中包含的核心功能及特性如下：<br>Web App Manifest<br>Service Worker<br>Cache API 缓存<br>Push&amp;Notification 推送与通知<br>Background Sync 后台同步<br>响应式设计</strong></p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/Web%E5%BC%80%E5%8F%91/" rel="tag">Web开发</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-多人姿态估计研究进展报告" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="../../2020/02/18/%E5%A4%9A%E4%BA%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1%E7%A0%94%E7%A9%B6%E8%BF%9B%E5%B1%95%E6%8A%A5%E5%91%8A/"
    >多人姿态估计研究进展报告</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="../../2020/02/18/%E5%A4%9A%E4%BA%BA%E5%A7%BF%E6%80%81%E4%BC%B0%E8%AE%A1%E7%A0%94%E7%A9%B6%E8%BF%9B%E5%B1%95%E6%8A%A5%E5%91%8A/" class="article-date">
  <time datetime="2020-02-17T16:00:00.000Z" itemprop="datePublished">2020-02-18</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="../../categories/Artificial-Intelligence/">Artificial Intelligence</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>Welcome to share creative thoughts!</p>
<h2 id="SimplePose-Rethinking-and-Improving-a-Bottom-upApproach-for-Multi-Person-Pose-Estimation"><a href="#SimplePose-Rethinking-and-Improving-a-Bottom-upApproach-for-Multi-Person-Pose-Estimation" class="headerlink" title="SimplePose:Rethinking and Improving a Bottom-upApproach for Multi-Person Pose Estimation"></a>SimplePose:Rethinking and Improving a Bottom-upApproach for Multi-Person Pose Estimation</h2><h2 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的:"></a>实验目的:</h2><p> 1.将Spatial Attention Mechanism和Channel Attention Mechanism融 合到Stacked Hourglass中，使用多尺度监督学习的方法引导网络生成高质 量高分辨率的热图，并且提高网络检测人体姿态的尺度变化的鲁棒性。<br><img src="https://img-blog.csdnimg.cn/20200311232601643.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTc3MzYx,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>                                                                                         整体网络模型架构（图一）<br>                                                          导入空间注意力机制和渠道注意力机制的具体分支（图二）</p>
<h2 id="实验原理："><a href="#实验原理：" class="headerlink" title="实验原理："></a>实验原理：</h2><p>  让网络直接预测输入图像空间下的gaussian peak的采样。在下文的网络模 型和实验流程、难点中会详细推导。<br>  网络模型解析：<br>  1.从图一每个沙漏模块中提取5个不同尺度的特征图，这里的特征图指的是 所有下采样路径中被蓝色虚线框包围的特征图，用于生成不同尺度的热图。<br>   2.举例来说：图一中抽离了1/4比例尺的热图回归，前一阶段的回归特征图 和热图将在下一阶段根据身份ID来映射，通过 element-wise addition 的方法进行融合和复用。<br>  3.图二分为上下两个分支，提取了不同尺度的空间特征，生成Hourglass Network整个结构中所有分辨率的ground truth heatmap，网络内部在低 分辨率下做了多次前向推理，生成某个通道下的body part heatmap在各 个尺度的标签，实验结果中展示了5个scale下的热图。 </p>
<h2 id="实验对比"><a href="#实验对比" class="headerlink" title="实验对比:"></a>实验对比:</h2><p>1.在低分辨率下生成精确热度图的难度是很大的，先前的工作都是重新生成 在其他分辨率下的精确热图，采用特征金字塔的架构构建高级语义特征图。<br> 2.而本次实验方案是：汲取空间注意力机制的思想，使用自适应平均池化后 的“热度图”作为关键点定位信息的引导，先生成平均池化后的热度图，再 放置到网络输出的不同分辨率特征空间下做直接监督。 </p>
<h2 id="实验难点（一）"><a href="#实验难点（一）" class="headerlink" title="实验难点（一）"></a>实验难点（一）</h2><p>1.要对所引入的不同分辨率特征的监督损失做好平衡，否则容易出现训练失败（主要是梯度爆炸或者某个分辨率下学习不良）的情况。<br> 解决方案 : 1.对不同尺度下的损失进行加权，依据是根据输出特征图的面积进行数值上 的超参数调节。</p>
<h2 id="实验难点（二）"><a href="#实验难点（二）" class="headerlink" title="实验难点（二）"></a>实验难点（二）</h2><p> 2.解决数据预处理、坐标点变换和生成ground truth heatmap过程中的中 心点对齐问题，只有解决了这个问题才能让网络直接预测输入图像空间下的 gaussian peak的采样。 解决方案: 2.按照经典的图像缩放原则(比如opencv和PIL的resize函数)，将像素当作 是位于一个1*1单元格(cell)的中心，最终的目的是为了得出缩放前后某个像 素位置和原始位置的精确坐标值，这时候就需要考虑几何中心点对齐。 缩放过程中，必须要为目标图像dstImg上的每个像素位置找到与之对应的 原图像srcImg的位置，并把原图像srcImg上对应的像素值填入目标图像 dstImg的该坐标位置处。 注意：如果映射回原图srcImg的坐标位置不是整数，那么就需要做插值， 算出映射回去的非整数坐标位置上的原图上的像素值是多少，所以在缩放过 程中要选择使用几阶的插值算法 。<br> 实验中生成keypoint Gaussian heatmap和body part Gaussian heatmap的核心代码： </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 # x, y coordinates of centers of bigger grid, stride / 2 ‐0.5是为了在计算 响应图时，使用grid的中心 2 self.grid_x = np.arange(width) * stride + stride / 2 ‐ 0.5 # x ‐&gt; width</span><br><span class="line">3 self.grid_y = np.arange(height) * stride + stride / 2 ‐ 0.5 # y ‐&gt; heigh t4 # x ,y indexes (type: int) of heatmap feature maps 5 self.Y, self.X = np.mgrid[0:self.config.height:stride, 0:self.config.wid th:stride] 6 # 对&lt;numpy.lib.index_tricks.MGridClass object&gt; slice操作，比如L[:10:2]前1 0个数，每隔两个取一个 7 # # basically we should use center of grid, but in this place classic im plementation uses left‐top point. 8 self.X = self.X + stride / 2 ‐ 0.5 9 self.Y = self.Y + stride / 2 ‐ 0.5</span><br></pre></td></tr></table></figure>

<p> 实验难点（三）<br> 3.有多少个limb,就有多少个connection,相对应地就有多少个 paf channel。在处理某一个channel上limb的响应热图前，要保证它的长 宽与原始输入图片大小一致，必须要经过resize处理，具体处理时标号默认 从0开始而不是1。<br> 最终从收集的peaks中取出某类关键点（part)的集合。当出现不同节点相 互覆盖在同一个位置上时，代码中要做特殊边界处理，跳出本次检测的循 环。<br>实验结果： <img src="https://img-blog.csdnimg.cn/20200311232837586.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTc3MzYx,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200311232853418.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTc3MzYx,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="实验小结："><a href="#实验小结：" class="headerlink" title="实验小结："></a>实验小结：</h2><p>1.测试发现这种网络架构使用自适应平均池化后的“热度图”作为关键点定 位信息，将减少网络多尺度监督学习的难度，在低分辨率特征空间下只预测 关键点响应的大致区域。<br>2.实验结果显示：在多尺度特征融合的基础上，加入Spatial Attention Mechanism引导机制后，带来了1+%AP的精度提升。 实验改进方向： 对于预测body part area和keypoint area，回归gaussian peak比直接回 归两个相邻关键点之间的offset更加容易，但是要进一步提高AP，就要不 断优化不同关键点之间连接信息的挖掘策略，在代码中设计好逻辑判断，优 化预测limb的置信度迭代方案</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/Human-Pose-Estimination/" rel="tag">Human  Pose  Estimination</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-服务器端性能优化(一)之SSR" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="../../2020/02/12/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96(%E4%B8%80)%E4%B9%8BSSR/"
    >服务器端性能优化（一）之SSR</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="../../2020/02/12/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96(%E4%B8%80)%E4%B9%8BSSR/" class="article-date">
  <time datetime="2020-02-11T16:00:00.000Z" itemprop="datePublished">2020-02-12</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="../../categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B8%B2%E6%9F%93/">服务器渲染</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>Welcome to share creative thoughts!</p>
<h2 id="SSR"><a href="#SSR" class="headerlink" title="SSR"></a>SSR</h2><p>概括一下流程就是将组件或页面通过服务器生成html字符串，再发送到浏览器，最后将静态标记”混合”为客户端上完全交互的应用程序，此篇笔记以 vue为例，后面做了React的项目再记录补充一下~<br>原理：靠vue-server-renderer这个库的createRenderer()，然后调用rendererToString()。</p>
<h2 id="SSR渲染和客户端渲染的区别"><a href="#SSR渲染和客户端渲染的区别" class="headerlink" title="SSR渲染和客户端渲染的区别"></a>SSR渲染和客户端渲染的区别</h2><p>1、SSR渲染的优势：</p>
<p>（1）更利于SEO；</p>
<p>（2）更利于首屏渲染（特别是对于缓慢的网络情况或运行缓慢的设备，内容更快到达）</p>
<p>2、SSR渲染的缺点：</p>
<p>（1）服务器压力大，考虑服务器端负载。</p>
<p>（2）开发条件受限，只会执行到ComponentMount之前的生命周期钩子，引用第三方库不可用其他生命周期钩子，引用库选择产生很大的限制。</p>
<p>（3）学习成本增大，需要学习构建设置和部署的更多要求。</p>
<h2 id="从流程角度比较性能"><a href="#从流程角度比较性能" class="headerlink" title="从流程角度比较性能"></a>从流程角度比较性能</h2><p>1.SSR服务端渲染是先向后端服务器请求数据，然后生成完整首屏html返回给浏览器，<br>2.而<strong>客户端渲染是等js代码下载、加载、解析完成后再请求数据渲染</strong>，等待的过程页面是什么都没有的，就是用户看到的白屏！<br>2.服务端<strong>不需要等待js代码下载完成并请求数据</strong>，就可以返回一个已有完整数据的首屏页面<br>2.由服务端请求首屏数据，而不是客户端请求首屏数据，这是“快”的一个主要原因。<br>3.<strong>服务端在内网进行请求，数据响应速度快</strong>。<br>4.客户端在不同网络环境进行数据请求，<strong>外网http请求开销大，导致时间差</strong>。</p>
<h2 id="构建vue-demo"><a href="#构建vue-demo" class="headerlink" title="构建vue  demo"></a>构建vue  demo</h2><p>具体实现：</p>
<p>1、创建一个空项目 mkdir vuessr &amp;&amp; cd vuessr</p>
<p>2、运行 npm init 进行初始化</p>
<p>3、安装我们需要的依赖 cnpm install vue vue-server-renderer –save</p>
<p>4、创建index.js代码如下：</p>
<p>5、运行 node index.js 可以看到在控制台输出了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第 1 步：创建一个 Vue 实例</span></span><br><span class="line"><span class="keyword">const</span> Vue = <span class="built_in">require</span>(<span class="string">'vue'</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;Hello World&lt;/div&gt;`</span></span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 第 2 步：创建一个 renderer</span></span><br><span class="line"><span class="keyword">const</span> renderer = <span class="built_in">require</span>(<span class="string">'vue-server-renderer'</span>).createRenderer()</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 第 3 步：将 Vue 实例渲染为 HTML</span></span><br><span class="line">renderer.renderToString(app, (err, html) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line">  <span class="built_in">console</span>.log(html)</span><br><span class="line">  <span class="comment">// =&gt; &lt;div data-server-rendered="true"&gt;Hello World&lt;/div&gt;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="我理解的原理"><a href="#我理解的原理" class="headerlink" title="我理解的原理"></a>我理解的原理</h2><p>1.利用服务端Node.js去执行VUE框架的构建逻辑，可以在服务端直接从接口拿到用户的信息，作为首屏渲染的数据源，直接当地解决好渲染，返回一个HTML，在浏览器端和VUE混入。<br>2.不在客户端执行JS逻辑，利用好服务端的运算能力，同时减少了客户端等待VUE框架加载和VUE 代码运行的时间，相当于平衡了两者的算力!<br>3.要考虑服务端的运算能力和压力，集群完备能力，还有内存泄漏问题！</p>
<h2 id="官方原理图"><a href="#官方原理图" class="headerlink" title="官方原理图"></a>官方原理图</h2><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zczIuYmRzdGF0aWMuY29tLzcwY0Z2blNoX1ExWW54R2twb1dLMUhGNmhoeS9pdC91PTQwNTU5MDYyNjgsMTMyNDg1NDI3MCZmbT0yNiZncD0wLmpwZw?x-oss-process=image/format,png" alt="在这里插入图片描述"><br>这是尤大牛老师在发布时的讲解图~<br>1.关键是编写针对VUE SSR渲染的组件（UAC）！其实生命周期是不一样的，VUE SSR时没有mounted阶段，因为SSR不存在DOM节点的真实渲染情况。<br>2.APP.JS有两个构建入口，Webpack 会分别构建用于S和C的两个bundle,分别在S和C端用到，首屏的渲染问题已经在Bundle Renderer中解决了！这时HTML包含了首屏的DOM结构和数据，HTML由BR生成，到浏览器之后，还是要通过客户端的VUE框架进行管理，怎么决定混入之后的关联？ <del>由Client Bundle 解决吗？</del> 还是利用serverBundle和clientManifest进行优化<br>？这里还不太明白。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93d3cubXdjeHMudG9wL3N0YXRpYy91cGxvYWQvcGljcy8yMDE5LzMvMU9iYWVUeHdzc2JEYnhXSnBZSXVUVWptay5wbmc?x-oss-process=image/format,png" alt="在这里插入图片描述"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93d3cubXdjeHMudG9wL3N0YXRpYy91cGxvYWQvcGljcy8yMDE5LzMvMVJnZXUySU1QQ1pJRFY0dDlZRGtNSkVBeS5wbmc?x-oss-process=image/format,png" alt="在这里插入图片描述"><br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly93d3cubXdjeHMudG9wL3N0YXRpYy91cGxvYWQvcGljcy8yMDE5LzMvMWhGUHQxUHhVRDhHOHhhR25QNDFiY08tTy5wbmc?x-oss-process=image/format,png" alt="在这里插入图片描述"></p>
<h2 id="深入思考"><a href="#深入思考" class="headerlink" title="深入思考"></a>深入思考</h2><blockquote>
<p>是否可以使用vuex？<br>我也没有准确答案~<br>是否使用SSR就一定好？<br>这个不一定，任何技术都有使用场景。<br>SSR可以帮助提升首页加载速度，优化搜索引擎SEO。<br>但同时它需要在node中渲染整套Vue的模板，会占用服务器负载。<br>并且只会执行beforeCreate和created两个生命周期，对于一些外部扩展库需要做一定处理才可以在SSR中运行。</p>
</blockquote>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/%E4%B8%AA%E4%BA%BA%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92/" rel="tag">个人职业规划</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/%E6%80%9D%E8%80%83%E5%A4%8D%E7%9B%98/" rel="tag">思考复盘</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-webpack学习笔记" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="../../2020/01/15/webpack%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
    >Webpack学习笔记</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="../../2020/01/15/webpack%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
  <time datetime="2020-01-14T16:00:00.000Z" itemprop="datePublished">2020-01-15</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="../../categories/%E6%89%93%E6%80%AA%E5%8D%87%E7%BA%A7Webpack/">打怪升级Webpack</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>Welcome to share creative thoughts!</p>
<p>本质上，webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。</p>
<h2 id="四个核心概念："><a href="#四个核心概念：" class="headerlink" title="四个核心概念："></a>四个核心概念：</h2><p>入口(entry)<br>输出(output)<br>loader：实现非js文件的打包，比如css, img, html等，通过loader功能<br>插件(plugins)：有效地打包压缩css/img/html等文件<br>loader和plugins配合使用。</p>
<p>更多👉：官方文档</p>
<h2 id="1-全局安装"><a href="#1-全局安装" class="headerlink" title="1.全局安装"></a>1.全局安装</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">npm/cnpm install webpack -g</span><br><span class="line">npm/cnpm install webpack-cli -g</span><br><span class="line">或者</span><br><span class="line">npm/cnpm install webpack webpack-cli -g</span><br></pre></td></tr></table></figure>

<h2 id="2-项目初始化，生成package-json"><a href="#2-项目初始化，生成package-json" class="headerlink" title="2. 项目初始化，生成package.json"></a>2. 项目初始化，生成package.json</h2><p>进入项目目录project_dir<br>执行npm init，一路回车，默认即可<br>项目文件夹下，会生成文件夹node_modules和文件package.json</p>
<h2 id="3-局部安装"><a href="#3-局部安装" class="headerlink" title="3. 局部安装"></a>3. 局部安装</h2><p>在项目目录下打开cmd<br>执行命令：<br>npm/cnpm install webpack webpack-cli -S</p>
<h2 id="4-打包测试"><a href="#4-打包测试" class="headerlink" title="4. 打包测试"></a>4. 打包测试</h2><p>webpack4打包命令为：webpack</p>
<p>D:\wpack&gt;webpack<br>默认entry：src/index.js</p>
<p>默认output：dist/main.js</p>
<p>默认打包模式为生成环境production</p>
<p>开发模式（不压缩格式）：webpack –mode development</p>
<p>生产模式（压缩格式）：webpack –mode production</p>
<h2 id="5-基本配置-webpack-config-js"><a href="#5-基本配置-webpack-config-js" class="headerlink" title="5. 基本配置: webpack.config.js"></a>5. 基本配置: webpack.config.js</h2><p>5.1 webpack.config.js配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">"production"</span>, <span class="comment">// 两种模式：production和development，默认prodcution</span></span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        filename: <span class="string">'main.js'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>其中，mode模式设置，亦可在package.json中设置，选一种方法即可。</p>
<p>5.2 package.json配置</p>
<p>在package.json文件中可以进行一些配置，比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置为如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="string">"scripts"</span>: &#123;</span><br><span class="line">        <span class="comment">// test等脚本名字随意自定义</span></span><br><span class="line">        <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">        <span class="comment">// 定义一个build脚本，指定config文件名称，可以更改配置文件的名字，例如改为webpack.config.my.js</span></span><br><span class="line">        <span class="string">"build"</span>: <span class="string">"webpack --config webpack.config.js"</span></span><br><span class="line">        <span class="comment">// mode设置，webpack.config.js中设置过mode后，此处可不用重复设置</span></span><br><span class="line">        <span class="string">"start"</span>: <span class="string">"webpack --mode development"</span>,</span><br><span class="line">  &#125;</span><br><span class="line">执行脚本：</span><br><span class="line"></span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<h2 id="6-安装本地服务器（dev-server）："><a href="#6-安装本地服务器（dev-server）：" class="headerlink" title="6 安装本地服务器（dev-server）："></a>6 安装本地服务器（dev-server）：</h2><p>在项目目录下执行命令：npm/cnpm install webpack-dev-server -S</p>
<p>webpack.config.js中相关配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        filename: <span class="string">'main2.js'</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<pre><code>// 配置dev-server</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    devServer: &#123;</span><br><span class="line">        contentBase:<span class="string">"./dist"</span>,</span><br><span class="line">        <span class="comment">// 本地服务器打包后文件保存路径</span></span><br><span class="line">        inline:<span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 实时刷新开启</span></span><br><span class="line">        port: <span class="number">3000</span>,</span><br><span class="line">        <span class="comment">// 端口设置</span></span><br><span class="line">        progress: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 打包进度条开启</span></span><br><span class="line">        compress: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 启动压缩</span></span><br><span class="line">        open: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 自动打开浏览器</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>devServer中还有很多配置项目，如port端口等。</p>
<p><strong>package.json中相关配置：</strong>添加dev脚本，通过执行npm run dev实现自动打开浏览器并在更新js文件后自动刷新浏览器</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">     <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">     <span class="string">"build"</span>: <span class="string">"webpack --config webpack.config.js"</span>,</span><br><span class="line">     <span class="string">"start"</span>: <span class="string">"webpack --mode development"</span>,</span><br><span class="line">     <span class="comment">// 定义一个dev脚本，启动服务器</span></span><br><span class="line">     <span class="string">"dev"</span>: <span class="string">"webpack-dev-server --open --inline"</span></span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<p>dev脚本说明：</p>
<p>webpack-dev-server：”启动webpack本地服务器”<br>–open: “自动打开浏览器”<br>–inline: “更新js后实时刷新浏览器”<br>注：总结：模块打包机，分析项目结构，找到JS模块和一些浏览器不能直接运行的拓展语言  scss  typescript，并将其打包为合适的格式给浏览器使用.优化产出，解析JS的模块，以当前的JS为准，查找所有相关的依赖文件，把文件打包成一个文件，解决了require问题。目录是dist<br>命令是npx webpack<br>手动配置，webpage.config.js<br>webpack是node写出来 的,自己配置入口和出口，路劲必须是绝对路径<br>path.resolve可以把相对路径解析成绝对路径</p>
<h2 id="7-loader配置"><a href="#7-loader配置" class="headerlink" title="7. loader配置"></a>7. loader配置</h2><p>7.1 测试无loader时的打包</p>
<p>首先在/src下创建一个style.css文件，然后在入口文件index.js中引入，方法如下：</p>
<p>import ‘./style.css’;<br>保存后，dev-server自动打包并刷新，但会报错，如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Version: webpack <span class="number">4.41</span><span class="number">.2</span></span><br><span class="line">Time: <span class="number">28</span>ms</span><br><span class="line">Built at: <span class="number">2019</span><span class="number">-12</span><span class="number">-15</span> <span class="number">3</span>:<span class="number">04</span>:<span class="number">36</span> PM</span><br><span class="line">   Asset     Size  Chunks             Chunk Names</span><br><span class="line">main2.js  <span class="number">366</span> KiB    main  [emitted]  main</span><br><span class="line">Entrypoint main = main2.js</span><br><span class="line">[./src/index.js] <span class="number">200</span> bytes &#123;main&#125; [built]</span><br><span class="line">[./src/style.css] <span class="number">274</span> bytes &#123;main&#125; [built] [failed] [<span class="number">1</span> error]</span><br><span class="line">    + <span class="number">32</span> hidden modules</span><br><span class="line"></span><br><span class="line">ERROR <span class="keyword">in</span> ./src/style.css <span class="number">1</span>:<span class="number">4</span></span><br><span class="line">Module parse failed: Unexpected token (<span class="number">1</span>:<span class="number">4</span>)</span><br><span class="line">You may need an appropriate loader to handle <span class="keyword">this</span> file type, currently no loaders are configured to process <span class="keyword">this</span> file. See https:<span class="comment">//webpack.js.org/concepts#loaders</span></span><br><span class="line">&gt; body&#123;</span><br><span class="line">|     background-color: orange;</span><br><span class="line">| &#125;</span><br><span class="line"> @ ./src/index.js <span class="number">6</span>:<span class="number">0</span><span class="number">-21</span></span><br><span class="line">i ｢wdm｣: Failed to compile.</span><br><span class="line">原因为：没有相应的loader。</span><br></pre></td></tr></table></figure>

<p>7.2 配置loader</p>
<p>根据loader列表，找到对应的loader并下载安装（注意在项目目录下）。</p>
<p>安装常用的loader：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cnpm install style-loader css-loader -S</span><br><span class="line">cnpm install less less-loader -S</span><br><span class="line">cnpm install file-loader -S</span><br><span class="line">配置webpack.config.js：</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">       contentBase:<span class="string">"./dist"</span>,</span><br><span class="line">       <span class="comment">// 本地服务器路径</span></span><br><span class="line">       inline:<span class="literal">true</span>,</span><br><span class="line">       <span class="comment">// 实时刷新开启</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="built_in">module</span>: &#123;</span><br><span class="line">       rules: [</span><br><span class="line">           <span class="comment">// 配置打包css文件的loader，use定义使用到的loader，注意顺序</span></span><br><span class="line">         	&#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>] &#125;,</span><br><span class="line">           <span class="comment">// 配置图片的loader</span></span><br><span class="line">           &#123; <span class="attr">test</span>: <span class="regexp">/\.(jpg|png|jpeg)$/</span>, <span class="attr">use</span>: [<span class="string">'file-loader'</span>] &#125;</span><br><span class="line">           <span class="comment">// 根据需要配置其他文件的loader</span></span><br><span class="line">       ]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>注意：style-loader必须放在css-loader前面，执行有顺序（链式传递），否则报错。<br>从上到下、从右至左，顺序执行。<br>bundle是打包后的结果<br>bundle.js是一个匿名自执行函数，默认执行会传入一个对象，key  value<br>当前模块的路径是key   value函数是对象，对象中找到名字，call传入当前模块，require的返回结果就是模块的导出，把解析的所有模块变成一个对象，通过入口加载，依次去递归实现依赖关系。<br>入口文件，检查一下是不是在缓存中，安装模块，<br>dev:server:可以配置端口，加进度条progress<br>contentbase:找到文件夹<br>实现静态服务，npm run dev<br>插件：<br>打包后叫bundle.js<br>HTMLWebpackPlugin<br>yarn add<br>插件是一个数组，放着所有的插件<br>先new 一下，告诉模板和打包后的名字 npm run dev<br>哈希戳，在minify里面配置<br>hash可以产生新的时间标志，文件有更改，每次打包都不一样防止覆盖，加hash指定位数。<br>默认只认定JS模块， 模块解析失败  需要loader处理CSS模块<br>把源代码转换，转化成一个模块，配置module<br>找到以CSS结尾的，写正则，写个规则数组，去匹配不同的文件，<br>匹配CSS，/.css$/<br>css-loader 接续@import<br>style-loader  把CSS插入到head的标签中<br><strong>loader单一职责，多个loader需要数组，有顺序 的，默认从右向左，从下到上执行，先CSS再插入  loader还可以写成对象的方式，对象可以多传参数</strong><br>less-loader  style-loader<br>options里面可以写配置参数，写插入的位置<br>less-loader把less-&gt;css<br>yarn add less-loader<br>sass stylus sass-loader<br><strong>插件没有顺序<br>单独抽离文件 mini-css-extract-plugin</strong><br>插件都是类，new一下，写上名字<br>post-css-loader<br>插件有:mini -css-extract-plugin<br>optimize-css-assets-webpack-plugin<br>sourcemap源码映射</p>
<p>rule的另一种丰富配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">test</span>: <span class="regexp">/\.(css|less)$/</span>, <span class="attr">use</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    loader: <span class="string">"style-loader"</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">						<span class="comment">// 此处可以进行其他设置</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                    <span class="string">'css-loader'</span>, <span class="comment">// 解析@import路径</span></span><br><span class="line">                    <span class="string">'less-loader'</span> <span class="comment">// 把less解析为css</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">如上rule的执行顺序为：less-loader &gt; css-loader &gt; style-loader &gt; options</span><br></pre></td></tr></table></figure>

<h2 id="8-插件plugins"><a href="#8-插件plugins" class="headerlink" title="8. 插件plugins"></a>8. 插件plugins</h2><p>插件在webpack.config.js中不区分顺序。</p>
<p>8.1 Html文件处理</p>
<p>，打包html文件，安装插件（注意在项目目录下安装）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">cnpm install html-webpack-plugin -S</span><br><span class="line">配置webpack.config.js：</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">// 配置loader</span></span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>] &#125;,</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.(jpg|png|jpeg)$/</span>, <span class="attr">use</span>: [<span class="string">'file-loader'</span>] &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 配置插件</span></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: <span class="string">"./src/index.html"</span>, <span class="comment">// 打包前的html文件</span></span><br><span class="line">            filename: <span class="string">"index.html"</span>, <span class="comment">// 打包后的html文件名</span></span><br><span class="line">            minify: &#123;</span><br><span class="line">                removeAttributeQuotes: <span class="literal">true</span>, <span class="comment">// 去除引号</span></span><br><span class="line">                removeComments: <span class="literal">true</span>, <span class="comment">// 去除注意</span></span><br><span class="line">                removeEmptyAttributes: <span class="literal">true</span>,<span class="comment">// 去除空属性</span></span><br><span class="line">                collapseWhitespace: <span class="literal">true</span> <span class="comment">// 去除空格</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>

<p>8.2 样式抽离</p>
<p>安装抽离css插件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev mini-css-extract-plugin</span><br><span class="line">配置webpack.config.js：</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">"mini-css-extract-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 方法三： 使用抽离</span></span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [</span><br><span class="line">                    MiniCssExtractPlugin.loader,</span><br><span class="line">                    <span class="string">'css-loader'</span>, <span class="comment">// 解析@import路径</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.less$/</span>, <span class="attr">use</span>: [</span><br><span class="line">                    MiniCssExtractPlugin.loader,</span><br><span class="line">                    <span class="string">'css-loader'</span>, <span class="comment">// 解析@import路径</span></span><br><span class="line">                    <span class="string">'less-loader'</span> <span class="comment">// 把less解析为css</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.(jpg|png|jpeg)$/</span>, <span class="attr">use</span>: [<span class="string">'file-loader'</span>] &#125;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// 添加css抽离插件</span></span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: <span class="string">"main.css"</span>, <span class="comment">// 设置文件，css抽离为main.css文件中</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>

<p>抽离出的main.css没有被压缩，需安装插件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev terser-webpack-plugin <span class="comment">// 压缩js</span></span><br><span class="line">cnpm install --save-dev optimize-css-assets-webpack-plugin  <span class="comment">// 压缩抽离的css</span></span><br><span class="line">注意：以上两个插件需配合使用，同时配置，如只配置css插件，则js不会被压缩。</span><br></pre></td></tr></table></figure>

<p>并配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">"mini-css-extract-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> TerserJSPlugin = <span class="built_in">require</span>(<span class="string">"terser-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">"optimize-css-assets-webpack-plugin"</span>);</span><br><span class="line"><span class="comment">// 此处省略...</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">"production"</span>, <span class="comment">//此处必须设置为production模式，否则抽离的css文件不会被压缩</span></span><br><span class="line">    <span class="comment">// 此处省略...</span></span><br><span class="line">    optimization: &#123; <span class="comment">// 优化项</span></span><br><span class="line">        minimizer: [</span><br><span class="line">            <span class="comment">// 同时实现js文件的压缩，与css抽离压缩插件同时配合使用，替代uglify</span></span><br><span class="line">            <span class="keyword">new</span> TerserJSPlugin(&#123;&#125;),</span><br><span class="line">            <span class="comment">// 压缩抽离后的css文件，此优化仅在production模式有效，development模式下不压缩</span></span><br><span class="line">            <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;)</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>:&#123;</span><br><span class="line">        <span class="comment">// 此处省略...</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins:&#123;</span><br><span class="line">        <span class="comment">// 此处省略...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">优化项配置完成后，抽离的css文件和js文件即可正常同时被压缩。</span><br></pre></td></tr></table></figure>

<h2 id="9-JS语法转化"><a href="#9-JS语法转化" class="headerlink" title="9. JS语法转化"></a>9. JS语法转化</h2><p>使用babel模块。<br>安装基础loader：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">npm install -D babel-loader @babel/core @babel/preset-env webpack</span><br><span class="line">安装转化<span class="class"><span class="keyword">class</span>定义的对象的<span class="title">loader</span>：</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">npm</span> <span class="title">install</span> --<span class="title">save</span>-<span class="title">dev</span> @<span class="title">babel</span>/<span class="title">plugin</span>-<span class="title">proposal</span>-<span class="title">class</span>-<span class="title">properties</span></span></span><br><span class="line"><span class="class">安装转化装饰器用法的<span class="title">loader</span>：</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">npm</span> <span class="title">install</span> --<span class="title">save</span>-<span class="title">dev</span> @<span class="title">babel</span>/<span class="title">plugin</span>-<span class="title">proposal</span>-<span class="title">decorators</span></span></span><br><span class="line"><span class="class">配置<span class="title">webpack</span>.<span class="title">config</span>.<span class="title">js</span>：</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 此处省略...</span></span><br><span class="line"><span class="class"><span class="title">module</span>.<span class="title">exports</span> </span>= &#123;</span><br><span class="line"><span class="comment">// 此处省略...</span></span><br><span class="line">    rules: [</span><br><span class="line">            <span class="comment">// 此处省略...</span></span><br><span class="line">            <span class="comment">// js语法转化</span></span><br><span class="line">            &#123;<span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">use</span>: &#123;</span><br><span class="line">                loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                  presets: [<span class="string">'@babel/preset-env'</span>],</span><br><span class="line">                  plugins: [  <span class="comment">// 参考文档配置</span></span><br><span class="line">                      <span class="comment">// '@babel/plugin-proposal-object-rest-spread',</span></span><br><span class="line">                      [<span class="string">"@babel/plugin-proposal-decorators"</span>, &#123; <span class="string">"legacy"</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">                      [<span class="string">"@babel/plugin-proposal-class-properties"</span>, &#123; <span class="string">"loose"</span> : <span class="literal">true</span> &#125;]</span><br><span class="line">                  ]</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">&#125;</span><br><span class="line">如有需要其他babel-loader，可通过官网查找安装并配置。</span><br></pre></td></tr></table></figure>
<p>转化ES6语法<br>babel转换JS转成ES5 核心模块可以转换源代码<br>yarn add babel-loader @babel/core  @babel/preset-env  转化JS语法<br>promise也不会转化，要安装babel代码运行的包<br>@Babel/plugin-transform-runtime<br>@Babel-polyfill<br>js语法校验器：ESLint   校验语法规范<br>yarn add eslint eslint-loader   自己选择公司需要的环境和规则，下载json 文件放到配置中<br>enforce:”pre”   可以强制改变执行顺序</p>
<h2 id="10-图片处理"><a href="#10-图片处理" class="headerlink" title="10. 图片处理"></a>10. 图片处理</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>&gt; 在js中创建图片来引入:</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> bgimg <span class="keyword">from</span> <span class="string">'./2.png'</span>; <span class="comment">// 引入图片并返回新的图片地址</span></span><br><span class="line"><span class="keyword">let</span> image = <span class="keyword">new</span> Image();</span><br><span class="line"><span class="built_in">console</span>.log(image);</span><br><span class="line">image.src = bgimg;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(image);</span><br><span class="line"><span class="number">2</span>&gt; 在CSS中引入图片:</span><br><span class="line"></span><br><span class="line">body&#123;</span><br><span class="line">    background-color: yellow;</span><br><span class="line">    background-image: url(<span class="string">"2.png"</span>);</span><br><span class="line">&#125;</span><br><span class="line">div&#123;</span><br><span class="line">    background-image: url(<span class="string">'./1.jpg'</span>);</span><br><span class="line">    width: <span class="number">500</span>px;</span><br><span class="line">    height: <span class="number">700</span>px;</span><br><span class="line">&#125;</span><br><span class="line">然后由js导入：</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./style.css'</span>;</span><br><span class="line"><span class="number">3</span>&gt; html中img标签引入图片：</span><br><span class="line"></span><br><span class="line">&#123; <span class="attr">test</span>: <span class="regexp">/\.(jpg|png|jpeg)$/</span>, <span class="attr">use</span>: &#123;</span><br><span class="line">                loader: <span class="string">'file-loader'</span>,</span><br><span class="line">                options:&#123;</span><br><span class="line">                    esModule: <span class="literal">false</span>, <span class="comment">// 此处必须加，否则无法压缩图片路径</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; &#125;,</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.html$/</span>, <span class="attr">use</span>: &#123;</span><br><span class="line">                loader: <span class="string">'html-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    attrs: [<span class="string">':src'</span>, <span class="string">':data-src'</span>],</span><br><span class="line">                    minimize:<span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; &#125;,</span><br><span class="line">            <span class="comment">// &#123; test: /\.html$/, use: 'html-withimg-loader' &#125;,</span></span><br></pre></td></tr></table></figure>

<h2 id="11-指定路径"><a href="#11-指定路径" class="headerlink" title="11. 指定路径"></a>11. 指定路径</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>&gt; 单独位img路径添加域名前缀：</span><br><span class="line"></span><br><span class="line">&#123; <span class="attr">test</span>: <span class="regexp">/\.(jpg|png|jpeg)$/</span>, <span class="attr">use</span>: &#123;</span><br><span class="line">                loader: <span class="string">'file-loader'</span>,</span><br><span class="line">                options:&#123;</span><br><span class="line">                    esModule: <span class="literal">false</span>,</span><br><span class="line">                    outputPath: <span class="string">'/img/'</span>,  <span class="comment">// 存放在img文件夹下</span></span><br><span class="line">                    publicPath: <span class="string">'htpp://localhost'</span> <span class="comment">// 路径前添加域名，此时/img/文件夹失效；</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; &#125;,</span><br><span class="line">故，其他文件可进行类似单独设置。 <span class="number">2</span>&gt; 为img/css/js等文件统一添加域名前缀：</span><br><span class="line"></span><br><span class="line">    entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        filename: <span class="string">'bundle-[hash:8].js'</span>,  <span class="comment">// bundle-[hash].js 给文件名增加hash值,[hash:8]显示前8位</span></span><br><span class="line">        publicPath: <span class="string">'http://localhost'</span>  <span class="comment">// 为所有路径添加域名前缀</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>3&gt;为css指定存放文件夹：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">      <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">          filename: <span class="string">"css/main.css"</span>, <span class="comment">// css抽离为main.css文件中,并存放只dist/css文件夹下</span></span><br><span class="line">      &#125;)</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>

<h2 id="12-多页面打包"><a href="#12-多页面打包" class="headerlink" title="12. 多页面打包"></a>12. 多页面打包</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>&gt; 多入口entry、多出口output设置：</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 单入口</span></span><br><span class="line">    <span class="comment">// entry: './src/index.js',</span></span><br><span class="line">    <span class="comment">// 多入口</span></span><br><span class="line">    entry: &#123;</span><br><span class="line">        home: <span class="string">'./src/index.js'</span>,</span><br><span class="line">        other: <span class="string">'./src/other.js'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 对应多出口</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        <span class="comment">// 单出口设置</span></span><br><span class="line">        <span class="comment">// filename: 'bundle-[hash:8].js',  // bundle-[hash].js 给文件名增加hash值,[hash:8]显示前8位</span></span><br><span class="line">        <span class="comment">// path: path.resolve(__dirname, 'dist'),</span></span><br><span class="line">        <span class="comment">// 多出口设置, [name]代表多入口变量名home,other，逐一打包</span></span><br><span class="line">        filename: <span class="string">'[name].js'</span>, <span class="comment">// 仍可以加hash值</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        <span class="comment">// publicPath: 'http://localhost'</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>2&gt; html-webpack-plugin设置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: <span class="string">"./index.html"</span>,</span><br><span class="line">            filename: <span class="string">"index.html"</span>,</span><br><span class="line">            chunks: [<span class="string">'home'</span>], <span class="comment">// 多页面打包设置，对应入口js</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="comment">// 多页面打包，多个new，单页面可以引入多个入口js</span></span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: <span class="string">"./other.html"</span>,</span><br><span class="line">            filename: <span class="string">"other.html"</span>,</span><br><span class="line">            chunks: [<span class="string">'other'</span>, <span class="string">'home'</span>], <span class="comment">// 多页面打包设置，对应入口js, 先引入home再other</span></span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>

<h2 id="13-配置source-map"><a href="#13-配置source-map" class="headerlink" title="13. 配置source-map"></a>13. 配置source-map</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">tips：source-map会明显增加打包时间。 需要安装的包： @babel/core @babel/preset-env babel-loader webpack-dev-server 设置：</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">        home: <span class="string">'./src/index.js'</span>,</span><br><span class="line">        other: <span class="string">'./src/other.js'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 对应多出口</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">'[name].js'</span>,</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 1）源码映射，单独生成一个sourcemap文件，出错时会直接提示报错行</span></span><br><span class="line">    <span class="comment">// devtool: 'source-map', // 大而全的设置</span></span><br><span class="line">    <span class="comment">// 2）源码映射，不会产生单独的文件，单会直接显示错误的行列</span></span><br><span class="line">    <span class="comment">// devtool: 'eval-source-map',</span></span><br><span class="line">    <span class="comment">// 3) 不会产生列，但是会生成一个单独的映射文件</span></span><br><span class="line">    <span class="comment">// devtool: 'cheap-module-source-map', // 产生后可以保留起来</span></span><br><span class="line">    <span class="comment">// 4) 不会产生文件，集成再打包后的文件中，也不会产生列</span></span><br><span class="line">    devtool: <span class="string">'cheap-module-source-map'</span>, <span class="comment">// 产生后可以保留起来</span></span><br><span class="line">&#125;</span><br><span class="line">ps：以上<span class="number">4</span>个方法貌似都生成map文件了</span><br></pre></td></tr></table></figure>

<h2 id="14-watch实时打包"><a href="#14-watch实时打包" class="headerlink" title="14. watch实时打包"></a>14. watch实时打包</h2><p>希望实时打包，开启监控，<br>设置如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    devtool: <span class="string">'cheap-module-source-map'</span>, <span class="comment">// 产生后可以保留起来</span></span><br><span class="line">    <span class="comment">// 开启监控，实时打包设置</span></span><br><span class="line">    watch: <span class="literal">true</span>,<span class="comment">//</span></span><br><span class="line">    watchOptions:&#123; <span class="comment">// 设置监控选项</span></span><br><span class="line">        poll: <span class="number">1000</span>, <span class="comment">// 每秒查询1000次，我需要更新吗？</span></span><br><span class="line">        aggregateTimeout: <span class="number">500</span>, <span class="comment">// 防抖，ctrl+s后多久开始打包  500 MS内我输入的代码只打包一次</span></span><br><span class="line">        ignored: <span class="regexp">/node_modules/</span>, <span class="comment">// 忽略不需要监控的文件夹，不用监控</span></span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;&#125;<span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="15-常用插件（3个）"><a href="#15-常用插件（3个）" class="headerlink" title="15. 常用插件（3个）"></a>15. 常用插件（3个）</h2><p>安装：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev clean-webpack-plugin</span><br><span class="line">cnpm install --save-dev copy-webpack-plugin</span><br><span class="line">cleanwebpackPlugin -- 打包前清除dist目录</span><br><span class="line">copywebpackPlugin -- copy目录中的文件到指定目录</span><br><span class="line">bannerPlugin -- 版权声明插件，webpack内部插件，无需安装 引入：</span><br><span class="line"><span class="keyword">const</span> &#123;CleanWebpackPlugin&#125; = <span class="built_in">require</span>(<span class="string">"clean-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">"copy-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>); <span class="comment">// 内置bannerPlugin插件</span></span><br><span class="line"></span><br><span class="line">plugins:[</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(), <span class="comment">// 先删除dist目录再打包，不用填参数</span></span><br><span class="line">    <span class="keyword">new</span> CopyWebpackPlugin([ <span class="comment">// 可以设置多组from to</span></span><br><span class="line">        &#123;<span class="attr">from</span>:<span class="string">'doc'</span>, <span class="attr">to</span>:<span class="string">'./'</span>&#125;</span><br><span class="line">    ]),</span><br><span class="line">    <span class="keyword">new</span> webpack.BannerPlugin(<span class="string">"Make 2019 by Hanoso"</span>), <span class="comment">// 声明版权信息</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>ps：常用插件可以根据需要自行决定安装~</p>
<h2 id="16-webpack跨域问题"><a href="#16-webpack跨域问题" class="headerlink" title="16. webpack跨域问题"></a>16. webpack跨域问题</h2><p>跨域：请求端和响应端域名/端口不一致，即为跨域。 默认访问的路径<a href="http://localhost:8081" target="_blank" rel="noopener">http://localhost:8081</a> webpack-dev-serer服务路径 =&gt; 服务器端口3000端口 –&gt;跨域</p>
<p>1） 方法一：配置代理</p>
<p>首先在项目根目录创建server.js服务端文件；<br>配置devServer代理；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">在index.js中配置Ajax请求响应。</span><br><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="comment">// express</span></span><br><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);   <span class="comment">// 引入express，默认会启用服务</span></span><br><span class="line"><span class="keyword">let</span> app = express(); <span class="comment">// 创建app服务，让express执行</span></span><br><span class="line"><span class="comment">// /api/user, /test/user，请求路径中的mock被替换为空</span></span><br><span class="line">app.get(<span class="string">'/user'</span>,(req,res)=&gt;&#123; <span class="comment">// 写接口，请求req响应res，get请求路径/user，回调函数</span></span><br><span class="line">    res.json(&#123;<span class="attr">name</span>:<span class="string">'Hanoso666'</span>&#125;) <span class="comment">// 返回的响应json</span></span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">3000</span>); <span class="comment">// 监听3000端口</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line">devServer&#123;</span><br><span class="line">            <span class="comment">// 配置代理</span></span><br><span class="line">        proxy:&#123;</span><br><span class="line">            <span class="string">'/api'</span>: &#123;</span><br><span class="line">                <span class="comment">// webpack默认首页打开未8081端口，配置target转至3000端口，与</span></span><br><span class="line">                <span class="comment">// server.js端口保持一致，从而解决跨域问题</span></span><br><span class="line">                target: <span class="string">'http://localhost:3000'</span>,<span class="comment">//告诉去3000找API的user</span></span><br><span class="line">                pathRewrite: &#123;<span class="string">'^/api'</span>:<span class="string">''</span>&#125;, <span class="comment">// 将请求路径中开头/api替换为空，通过重写的方法把请求代理到express服务器上，前提是有服务器。</span></span><br><span class="line">                <span class="comment">// 请求端路径/api/user，实际情况不确定，可以有很多写法，如/test/user, /new/user等等，为避免重复设置，可将前端请求路径统一以/mock开头，如/mock/api/user, /mock/test/user, /mock/new/user, 然后将/mock替换为空，server.js中去掉/mock</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest(); <span class="comment">// 创建Ajax对象</span></span><br><span class="line">xhr.open(<span class="string">'GET'</span>,<span class="string">'/api/user'</span>,<span class="literal">true</span>); <span class="comment">// 建立GET请求 指定方法，路径，是否异步  /mock/api/user, /mock/test/user</span></span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(xhr.response); <span class="comment">// 设置回调，处理结果</span></span><br><span class="line">&#125;</span><br><span class="line">xhr.send(); <span class="comment">// 发送Ajax请求</span></span><br><span class="line">结果：启动dev和server.js后，访问http:<span class="comment">//localhost:8081即可经代理实现server.js响应，8081是webpack-dev-server的服务</span></span><br><span class="line">但是不在一个端口，要配置代理proxy。</span><br></pre></td></tr></table></figure>

<p>2）方法二：当前端只想单纯模拟数据时，不需要写server.js，只模拟前端数据 在devServer中设置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.cofig.js</span></span><br><span class="line">devServer&#123;</span><br><span class="line">        before(app)&#123; <span class="comment">// 内部的提供方法，钩子</span></span><br><span class="line">            app.get(<span class="string">'/user'</span>,(req,res)=&gt;&#123; <span class="comment">// 路径与index.js请求路径一致即可</span></span><br><span class="line">                res.json(&#123;<span class="attr">name</span>:<span class="string">'Hanoso2020'</span>&#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="comment">// express</span></span><br><span class="line"><span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest(); <span class="comment">// 创建Ajax对象</span></span><br><span class="line">xhr.open(<span class="string">'GET'</span>,<span class="string">'/api/user'</span>,<span class="literal">true</span>); <span class="comment">// 建立GET请求 /mock/api/user, /mock/test/user</span></span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(xhr.response); <span class="comment">// 设置回调</span></span><br><span class="line">&#125;</span><br><span class="line">xhr.send(); <span class="comment">// 发送Ajax请求</span></span><br></pre></td></tr></table></figure>

<p>3）方法三：有服务端，不用代理来处理，能不能在服务端启动webpack? webpack就是一个模块<br>采用中间件 就可以！ 仅在server.js中配置，先通过webpack拿到配置对象，产生编译对象 ，扔给中间件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="keyword">let</span> app = express();</span><br><span class="line"><span class="keyword">let</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="comment">// 中间件</span></span><br><span class="line"><span class="keyword">let</span> middle = <span class="built_in">require</span>(<span class="string">'webpack-dev-middleware'</span>);</span><br><span class="line"><span class="keyword">let</span> config = <span class="built_in">require</span>(<span class="string">'./webpack.config.js'</span>);<span class="comment">//拿到配置对象</span></span><br><span class="line"><span class="keyword">let</span> compailer = webpack(config); <span class="comment">// 启动server.js时启动webpack，由服务器端启动前端，处理配置文件，返回编译后的结果</span></span><br><span class="line"></span><br><span class="line">app.use(middle(compailer));<span class="comment">//加载中间件</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/user'</span>,(req,res)=&gt;&#123;</span><br><span class="line">    res.json(&#123;<span class="attr">name</span>:<span class="string">'Hanoso-middle'</span>&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>);  <span class="comment">// 端口可按需配置</span></span><br><span class="line">通过访问localhost:<span class="number">300</span>/user打开网页，即可实现数据打印&#123;<span class="string">"name"</span>:<span class="string">"Hanoso-middle"</span>&#125;，即设置成功。</span><br></pre></td></tr></table></figure>

<h2 id="17-resolve解析第三方包"><a href="#17-resolve解析第三方包" class="headerlink" title="17. resolve解析第三方包"></a>17. resolve解析第三方包</h2><p>示例代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span>.modules&#123;</span><br><span class="line">    resolve:&#123; <span class="comment">// 解析第三方包</span></span><br><span class="line">        modules:[path.resolve(<span class="string">'node_modules'</span>)],</span><br><span class="line">        extensions:[<span class="string">'.js'</span>,<span class="string">'.css'</span>,<span class="string">'.json'</span>,<span class="string">'.vue'</span>], <span class="comment">// 限定扩展名，按序依次解析</span></span><br><span class="line">        mainFields:[<span class="string">'style'</span>,<span class="string">'main'</span>,<span class="string">'index'</span>], <span class="comment">// 入口文件的名字 index.js</span></span><br><span class="line">        alias:&#123; <span class="comment">// 设置别名，在index.js引入时可直接采用 import 'bootstrap'</span></span><br><span class="line">            bootstrap:<span class="string">'bootstrap/dist/css/bootstrap.css'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="18-配置环境变量"><a href="#18-配置环境变量" class="headerlink" title="18. 配置环境变量"></a>18. 配置环境变量</h2><p>示例代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">            DEV:<span class="built_in">JSON</span>.stringify(<span class="string">'dev'</span>), <span class="comment">// 字符串判断</span></span><br><span class="line">            FLAG:<span class="string">'true'</span>,  <span class="comment">// 此处也仅为演示，布尔判断</span></span><br><span class="line">            EXPRESSION:<span class="string">'1+1'</span>,</span><br><span class="line">            <span class="comment">// EXPRESSION:JSON.stringify('1+1'),  // 不加JSON.stringify，会打印出1+1.加上则打印2，此处仅作演示</span></span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="comment">// 环境变量配置</span></span><br><span class="line"><span class="keyword">let</span> url=<span class="string">""</span>;</span><br><span class="line"><span class="keyword">if</span>(DEV == <span class="string">'dev'</span>)&#123;</span><br><span class="line">    url = <span class="string">'http://localhost:8081'</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    url = <span class="string">'http://www.baidu.com'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(DEV);</span><br><span class="line"><span class="built_in">console</span>.log(EXPRESSION);</span><br><span class="line"><span class="built_in">console</span>.log(url);</span><br></pre></td></tr></table></figure>

<h2 id="19-区分不同环境变量（环境继承）"><a href="#19-区分不同环境变量（环境继承）" class="headerlink" title="19. 区分不同环境变量（环境继承）"></a>19. 区分不同环境变量（环境继承）</h2><p>需安装插件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">cnpm i --save-dev webpack-merge</span><br><span class="line"><span class="number">1</span>&gt; 创建基础配置文件webpack.base.js； <span class="number">2</span>&gt; 创建开发环境配置文件webpack.dev.js； <span class="number">3</span>&gt; 创建生产环境配置文件webpack.pro.js； 通过webpack-merge可以实现不同环境配置文件与基础配置文件的继承/覆盖。 示例代码如下：</span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.base.js 配置基础信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.dev.js 配置开发环境信息</span></span><br><span class="line"><span class="keyword">let</span> &#123;smart&#125; = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">let</span> base = <span class="built_in">require</span>(<span class="string">'./webpack.base.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = smart(base,&#123;</span><br><span class="line">    mode: <span class="string">'development'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.pro.js 配置生产环境信息</span></span><br><span class="line"><span class="keyword">let</span> &#123;smart&#125; = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">let</span> base = <span class="built_in">require</span>(<span class="string">'./webpack.base.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = smart(base,&#123;</span><br><span class="line">    mode: <span class="string">'production'</span></span><br><span class="line">&#125;)</span><br><span class="line">如开启不同环境，可执行如下代码： npm run build -- --config webpack.pro.js 亦可设置package.json文件：</span><br><span class="line"></span><br><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"webpack --config webpack.config.js"</span>,</span><br><span class="line">    <span class="string">"b-dev"</span>: <span class="string">"webpack --config webpack.dev.js"</span>,</span><br><span class="line">    <span class="string">"b-pro"</span>: <span class="string">"webpack --config webpack.pro.js"</span>,</span><br><span class="line">    <span class="string">"wds"</span>: <span class="string">"webpack-dev-server"</span>,</span><br><span class="line">    <span class="string">"server"</span>: <span class="string">"node server.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">通过以下命令启动相应环境：npm run b-dev 或 npm run b-pro。</span><br></pre></td></tr></table></figure>

<h2 id="20-优化项"><a href="#20-优化项" class="headerlink" title="20. 优化项"></a>20. 优化项</h2><p>noParse<br>功能：不去解析包（如jQuery）中的依赖库。 需配置config。</p>
<p>exclude或include<br>功能：排除或指定查找路径/文件夹，配置其一即可。 需配置config。</p>
<p>moment时间插件及IgnorePlugin<br>功能：格式化时间，时间计算等，可以设置语言。 安装：cnpm i –save-dev moment</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 时间插件moment</span></span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">'moment'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'moment/locale/zh-cn'</span>; <span class="comment">// 仅引入中文包</span></span><br><span class="line">moment.locale(<span class="string">'zh-cn'</span>); <span class="comment">// 设置语言</span></span><br><span class="line"><span class="keyword">let</span> r = moment().endOf(<span class="string">'day'</span>).fromNow();</span><br><span class="line"><span class="built_in">console</span>.log(r);</span><br><span class="line">需配置config。</span><br></pre></td></tr></table></figure>

<p>happypack多线程打包模块<br>安装：cnpm i –save-dev happypack，cnpm i –save-dev @babel/preset-react 多线程打包输出如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Happy[css]: Version: <span class="number">5.0</span><span class="number">.1</span>. Threads: <span class="number">3</span></span><br><span class="line">i ｢wds｣: Project is running at http:<span class="comment">//localhost:8081/</span></span><br><span class="line">i ｢wds｣: webpack output is served <span class="keyword">from</span> /</span><br><span class="line">i ｢wds｣: Content not <span class="keyword">from</span> webpack is served <span class="keyword">from</span> ./dist</span><br><span class="line">Happy[css]: All <span class="keyword">set</span>; signaling webpack to proceed.</span><br><span class="line">Happy[js]: Version: 5.0.1. Threads: 3</span><br><span class="line">Happy[js]: All <span class="keyword">set</span>; signaling webpack to proceed.</span><br><span class="line">i ｢wdm｣: Hash: 7b2804c8263a364b7bf0</span><br><span class="line">Version: webpack 4.41.4</span><br><span class="line">Time: 2572ms</span><br><span class="line">Built at: 2019-12-21 10:31:04 PM</span><br><span class="line">需配置config。</span><br></pre></td></tr></table></figure>

<p>webpack自带优化（tree-shaking + scope hosting）<br><strong>tree-shaking：采用import引入 生产环境下，把没用的到的代码 自动删除掉；</strong><br><strong>scope hosting：作用域提升，webpack打包时 自动简化 省略中间代码；</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js中</span></span><br><span class="line"><span class="comment">// webpack自带优化功能 测试</span></span><br><span class="line"><span class="keyword">import</span> calc <span class="keyword">from</span> <span class="string">'./test'</span></span><br><span class="line"><span class="built_in">console</span>.log(calc.sum(<span class="number">1</span>,<span class="number">2</span>));<span class="comment">//要换成calc.default.sum</span></span><br><span class="line"><span class="comment">// import 在生产环境下 可以自动去掉用不到的代码</span></span><br><span class="line"><span class="comment">// tree-shaking 把没用的到的代码 自动删除掉</span></span><br><span class="line"><span class="comment">// let calc = require('./test')</span></span><br><span class="line"><span class="comment">// console.log(calc.default.sum(1,2)); // 采用require方式，sum在default中</span></span><br><span class="line"><span class="comment">// ES6 模块会把结果放到default中</span></span><br><span class="line"><span class="comment">// require 不支持tree-shaking,引入不能像import一样在生产环境下去除多余代码，故推荐使用import引入</span></span><br><span class="line"><span class="comment">// scope hosting 作用域提升</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">let</span> d = a + b + c;</span><br><span class="line"><span class="built_in">console</span>.log(d, <span class="string">'--------------------'</span>) <span class="comment">// webpack打包时 自动简化 省略中间代码，返回最终结果</span></span><br><span class="line">抽离公共代码【导致其他问题】</span><br><span class="line">位置：optimization &#123; <span class="attr">splitChunks</span>:&#123;...&#125; &#125;</span><br><span class="line">问题：添加splitChunks配置后，会影响js/css等文件的打包，浏览器无效果。</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js中示例代码：</span></span><br><span class="line"><span class="comment">// 抽离公共代码 测试</span></span><br><span class="line"><span class="comment">// console.log('抽离公共代码 测试')//是为了缓存，提高加载速度，切换页面时缓存公共的页面部分样式。</span></span><br><span class="line"><span class="comment">// import './a.js'</span></span><br><span class="line"><span class="comment">// import './b.js'</span></span><br><span class="line"><span class="comment">// console.log('./index.js')</span></span><br><span class="line"><span class="comment">// import jquery from 'jquery';</span></span><br><span class="line"><span class="comment">// console.log(jquery)</span></span><br></pre></td></tr></table></figure>
<p>需配置config，跟单入口，单出口的文件相比，entry现在是一个对象了，output 的 filename 多了一个 [name].。<br>最后执行打包命令，可以看到 dist 目录下面生成了 index.bundle.js 和 signup.bundle.js 。<br>所以这里的 [name] 等同于 entry 定义的键名。<br>适合多页面应用，缓存公共部分代码<br>当遇到诸多子功能模块时，全部打包在一起的话会有好几MB，所以最佳方式是进行多入口打包。<br>以下来自他人的项目建议：<br>首先，项目打包策略遵循以下几点原则：<br><strong>选择合适的打包粒度，生成的单文件大小不要超过500KB<br>   充分利用浏览器的并发请求，同时保证并发数不超过6<br>   尽可能让浏览器命中304，频繁改动的业务代码不要与公共代码打包<br>   避免加载太多用不到的代码，层级较深的页面进行异步加载</strong></p>
<blockquote>
<p>第三方库如vue、jquery、bootstrap打包为一个文件<br> 公共组件如弹窗、菜单等打包为一个文件<br> 工具类、项目通用基类打包为一个文件<br> 各个功能模块打包出自己的入口文件<br>  各功能模块作用一个SPA，子页面进行异步加载</p>
</blockquote>
<p><img src="https://img-blog.csdn.net/20180620225415604?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1N1cGVyX0xE/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="在这里插入图片描述"></p>
<h2 id="懒加载"><a href="#懒加载" class="headerlink" title="懒加载"></a>懒加载</h2><p>场景：播放音乐，点按钮再加载资源播放。<br>介绍：在js代码回调函数中import其他js文件，并获取其中的数据。</p>
<p>示例代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// source.js中</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="string">'lazy-load'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js中</span></span><br><span class="line"><span class="comment">// 懒加载 测试</span></span><br><span class="line"><span class="keyword">let</span> button = <span class="built_in">document</span>.createElement(<span class="string">'button'</span>);<span class="comment">//绑定监听事件</span></span><br><span class="line">button.innerHTML = <span class="string">'Hello'</span>;</span><br><span class="line">button.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">import</span>(<span class="string">'./source.js'</span>).then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;  <span class="comment">// 回调函数中引入，路由懒加载的实现就是靠import语法</span></span><br><span class="line">    <span class="comment">//es6中的草案语法，jsonp实现动态加载文件</span></span><br><span class="line">        <span class="built_in">console</span>.log(data.default);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(button);</span><br></pre></td></tr></table></figure>

<h2 id="热更新"><a href="#热更新" class="headerlink" title="热更新"></a>热更新</h2><p>功能：局部更新修改的内容。每次更改页面只变一部分</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js中</span></span><br><span class="line"><span class="comment">// 热更新 测试</span></span><br><span class="line"><span class="keyword">import</span> str <span class="keyword">from</span> <span class="string">'./source'</span>;<span class="comment">//</span></span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">module</span>.hot)&#123; <span class="comment">// 如果devServer中hot为true，则启动热更新</span></span><br><span class="line">    <span class="built_in">module</span>.hot.accept(<span class="string">'./source'</span>,()=&gt;&#123;<span class="comment">//若支持热更新</span></span><br><span class="line">        <span class="keyword">let</span> str = <span class="built_in">require</span>(<span class="string">'./source'</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(str)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">需配置config。</span><br></pre></td></tr></table></figure>

<p>以下为上述优化项在webpack.config.js中的配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Happypack = <span class="built_in">require</span>(<span class="string">"happypack"</span>); <span class="comment">// 4）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        hot:<span class="literal">true</span>, <span class="comment">// </span></span><br><span class="line">    &#125;,</span><br><span class="line">    optimization: &#123; <span class="comment">// 优化项</span></span><br><span class="line">        minimizer: [ ],</span><br><span class="line">        <span class="comment">// splitChunks:&#123; // 分割代码块 6)</span></span><br><span class="line">        <span class="comment">//     cacheGroups:&#123; // 缓存组</span></span><br><span class="line">        <span class="comment">//         common:&#123; // 抽离 公共的模块</span></span><br><span class="line">        <span class="comment">//             chunks:'initial',</span></span><br><span class="line">        <span class="comment">//             minSize:0, // 最小大小</span></span><br><span class="line">        <span class="comment">//             minChunks:2, // 最小出现次数</span></span><br><span class="line">        <span class="comment">//         &#125;,</span></span><br><span class="line">        <span class="comment">//         vendor:&#123; // 抽离 第三方模块</span></span><br><span class="line">        <span class="comment">//             priority:1, // 权重高，优先抽离第三方模块，再抽离其他</span></span><br><span class="line">        <span class="comment">//             test:/node_modules/, // 要抽离出的文件</span></span><br><span class="line">        <span class="comment">//             chunks: 'initial',</span></span><br><span class="line">        <span class="comment">//             minSize:0,</span></span><br><span class="line">        <span class="comment">//             minChunks:2</span></span><br><span class="line">        <span class="comment">//         &#125;</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        noParse:<span class="regexp">/jquery/</span>, <span class="comment">// 排出不需要解析的包（没有其他依赖项的包）； 1)</span></span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">// 优化：多线程打包css文件</span></span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: <span class="string">'Happypack/loader?id=css'</span> &#125;,  <span class="comment">// 4)</span></span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">            &#123;<span class="attr">test</span>: <span class="regexp">/\.js$/</span>, </span><br><span class="line">            <span class="comment">// exclude和include配置一个即可 2)</span></span><br><span class="line">            exclude:<span class="regexp">/node_modules/</span>,  <span class="comment">// 排除文件夹，不去该路径下查找</span></span><br><span class="line">            <span class="comment">// include:path.resolve('src'), // 指定文件夹，去该路径下查找</span></span><br><span class="line">            <span class="comment">// 使用happypack对js进行打包</span></span><br><span class="line">            use: <span class="string">'Happypack/loader?id=js'</span>  <span class="comment">// 4)</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> webpack.NamedModulesPlugin(), <span class="comment">// 打印更新的模块路径 8)</span></span><br><span class="line">        <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(), <span class="comment">// 热更新插件 8)</span></span><br><span class="line">        <span class="keyword">new</span> Happypack(&#123; <span class="comment">// 多线程方式打包css文件 4)</span></span><br><span class="line">            id: <span class="string">'css'</span>,</span><br><span class="line">            use:[<span class="string">'style-loader'</span>,<span class="string">'css-loader'</span>]</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> Happypack(&#123; <span class="comment">// 多线程方式打包js文件 4)</span></span><br><span class="line">            id: <span class="string">'js'</span>,</span><br><span class="line">            use:[&#123;</span><br><span class="line">                loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">                options:&#123;</span><br><span class="line">                    presets: [</span><br><span class="line">                        <span class="string">'@babel/preset-env'</span>,</span><br><span class="line">                        <span class="string">'@babel/preset-react'</span></span><br><span class="line">                    ],</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> webpack.IgnorePlugin(<span class="regexp">/\.\/locale/</span>, /moment/), <span class="comment">// 忽略moment插件中的locale模块 3)</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../tags/%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%AD%A6%E4%B9%A0/" rel="tag">工具类学习</a></li></ul>


    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="../2/">上一页</a><a class="page-number" href="../../">1</a><a class="page-number" href="../2/">2</a><span class="page-number current">3</span><a class="page-number" href="../4/">4</a><a class="page-number" href="../5/">5</a><a class="page-number" href="../6/">6</a><a class="extend next" rel="next" href="../4/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2020
        Wangqiuxia
      </li>
      <li>
        
        Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
    <aside class="sidebar">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="../../index.html"><img src="/images/ayer-side.svg" alt="爱产品，爱前端！"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../index.html">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../tags/%E6%8A%80%E6%9C%AF/">小程序</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../http:/shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../https:/v.xiumi.us/stage/v5/4IeLH/197507179">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="../../atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="../../images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="../../images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="../../js/jquery-2.0.3.min.js"></script>


<script src="../../js/jquery.justifiedGallery.min.js"></script>


<script src="../../js/lazyload.min.js"></script>


<script src="../../js/busuanzi-2.3.pure.min.js"></script>


<script src="../../js/share.js"></script>



<script src="../../fancybox/jquery.fancybox.min.js"></script>




<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['做一个有情怀懂产品的程序媛！','业精于勤荒于嬉！行成于思毁于随！','越努力越幸运'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script>
  var ayerConfig = {
    mathjax: false
  }
</script>


<script src="../../js/ayer.js"></script>


<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>

    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52"
        src="//music.163.com/outchain/player?type=2&id=518895142&auto=1&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
  </div>
</body>

</html>