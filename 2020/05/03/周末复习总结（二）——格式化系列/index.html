<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    周末复习总结（二）——格式化系列 |  爱产品，爱前端！
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="../../../../css/style.css">

  
<script src="../../../../js/pace.min.js"></script>


  

  

<link rel="alternate" href="atom.xml" title="爱产品，爱前端！" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    <main class="content">
      <section class="outer">
  <article id="post-周末复习总结（二）——格式化系列" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  周末复习总结（二）——格式化系列
</h1>
  

    </header>
    

    
    <div class="article-meta">
      <a href="" class="article-date">
  <time datetime="2020-05-02T16:00:00.000Z" itemprop="datePublished">2020-05-03</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="../../../../categories/%E5%A4%8D%E4%B9%A0%E4%B8%8E%E5%9B%9E%E9%A1%BE/">复习与回顾</a>
  </div>

      
      
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">8.3k字</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">37分钟</span>
        </span>
    </span>
</div>

      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>写完中期论文前两章😁，周末来个前端总结、回顾！<br>内心装满知识和道理，就会充满踏实感+幸福感😃😘👍😁🥰🧡💯</p>
<h2 id="1、如何将-id-1-id-2-pId-1-…-的重复数组（有重复数据）转成树形结构的数组-id-1-child-id-2-pId-1-…-（需要去重）"><a href="#1、如何将-id-1-id-2-pId-1-…-的重复数组（有重复数据）转成树形结构的数组-id-1-child-id-2-pId-1-…-（需要去重）" class="headerlink" title="1、如何将 [{id: 1}, {id: 2, pId: 1}, …] 的重复数组（有重复数据）转成树形结构的数组 [{id: 1, child: [{id: 2, pId: 1}]}, …] （需要去重）"></a>1、如何将 [{id: 1}, {id: 2, pId: 1}, …] 的重复数组（有重复数据）转成树形结构的数组 [{id: 1, child: [{id: 2, pId: 1}]}, …] （需要去重）</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = [&#123;<span class="attr">id</span>: <span class="number">1</span>&#125;, &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">pId</span>: <span class="number">1</span>&#125;,&#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">pId</span>: <span class="number">2</span>&#125;]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> dataNoRepeat = data.reduce(<span class="function">(<span class="params">curr, acc</span>) =&gt;</span> &#123;<span class="comment">//数组里面每一项都是一个对象，即data是一个对象</span></span><br><span class="line">curr[acc.id] = acc<span class="comment">//键值对存储，acc是当前遍历的对象，curr是总结果，包含前面所有的结果</span></span><br><span class="line"><span class="keyword">return</span> curr<span class="comment">//必须要返回一个新数组，</span></span><br><span class="line">&#125;, &#123;&#125;)<span class="comment">//注意初始化为空对象</span></span><br><span class="line"><span class="keyword">let</span> tree = &#123;&#125;<span class="comment">//开辟树形对象空间，转化</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> dataNoRepeat) &#123;<span class="comment">//遍历对象，key是id</span></span><br><span class="line"><span class="keyword">const</span> item = dataNoRepeat[key]<span class="comment">//存每一项</span></span><br><span class="line"><span class="keyword">if</span>(item.pId) &#123;<span class="comment">//有pid，说明是孩子</span></span><br><span class="line"><span class="keyword">let</span> parent = dataNoRepeat[item.pId]<span class="comment">//找到父亲</span></span><br><span class="line"><span class="keyword">if</span>(parent) &#123;</span><br><span class="line"><span class="keyword">if</span>(!parent.children) &#123;</span><br><span class="line">parent.children = []<span class="comment">//孩子是空</span></span><br><span class="line">   &#125;</span><br><span class="line">parent.children.push(item)<span class="comment">//存储孩子的每一项</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">tree[item.id] = item<span class="comment">//没有父亲，就直接存储id</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(tree)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar(data)</span><br></pre></td></tr></table></figure>

<h2 id="二、字符转二进制、base64等"><a href="#二、字符转二进制、base64等" class="headerlink" title="二、字符转二进制、base64等"></a>二、字符转二进制、base64等</h2><p>易错点：</p>
<blockquote>
<p> 1、toString()方法可以根据所传递的参数把数值转换为对应进制的数字字符串。参数范围为 2~36 之间的任意整数。<br> 2、 toFixed(2)方法可以把Number 四舍五入为指定小数位数的数字。<br>方法一</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">charToBinary</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> code = <span class="string">""</span>;<span class="comment">//存放结果</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> text) &#123;</span><br><span class="line">    <span class="comment">// 字符编码，每一个都要编</span></span><br><span class="line">    <span class="keyword">let</span> number = i.charCodeAt().toString(<span class="number">2</span>);<span class="comment">//给计算机识别</span></span><br><span class="line">    <span class="comment">// 1 bytes = 8bit，将 number 不足8位的0补上</span></span><br><span class="line">    <span class="comment">//charCodeAt() 方法可返回指定位置的字符的 Unicode 编码。</span></span><br><span class="line">    <span class="comment">//非UTF-8编码，这个返回值是 0 - 65535 之间的整数。</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> a = <span class="number">0</span>; a &lt;= <span class="number">8</span> - number.length; a++) &#123;</span><br><span class="line">       number = <span class="number">0</span> + number;</span><br><span class="line">    &#125;</span><br><span class="line">    code += number;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> code;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>二进制转Base64， 将二进制数据每 6bit 位替换成一个 base64 字符</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">binaryTobase64</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> base64Code = <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"</span>;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="string">''</span>;</span><br><span class="line">  <span class="comment">// 1 bytes = 8bit，6bit 位替换成一个 base64 字符</span></span><br><span class="line">  <span class="comment">// 所以每 3 bytes 的数据，能成功替换成 4 个 base64 字符</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 对不足 24 bit (也就是 3 bytes) 的情况进行特殊处理</span></span><br><span class="line">  <span class="keyword">if</span> (code.length % <span class="number">24</span> === <span class="number">8</span>) &#123;</span><br><span class="line">    code += <span class="string">'0000'</span>;</span><br><span class="line">    res += <span class="string">'=='</span></span><br><span class="line">     &#125;</span><br><span class="line">  <span class="keyword">if</span> (code.length % <span class="number">24</span> === <span class="number">16</span>) &#123;</span><br><span class="line">    code += <span class="string">'00'</span>;</span><br><span class="line">    res += <span class="string">'='</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> encode = <span class="string">''</span>;</span><br><span class="line">  <span class="comment">// code 按 6bit 一组，转换为</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; code.length; i += <span class="number">6</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> item = code.slice(i, i + <span class="number">6</span>);</span><br><span class="line">    encode += base64Code[<span class="built_in">parseInt</span>(item, <span class="number">2</span>)];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> encode + res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方法二</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span>  binaryDataToBase64 = <span class="function"><span class="params">byte</span> =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">let</span> sBytes =  <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(byte).reduce(<span class="function">(<span class="params">accu,next</span>)=&gt;</span> &#123;</span><br><span class="line">         retrun accu + <span class="built_in">String</span>.fromCharCode(next)</span><br><span class="line">&#125;, <span class="string">''</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`data:image/png;base64,<span class="subst">$&#123;btoa(sBytes)&#125;</span>`</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>字符转Base64</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">base64encode</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> base64Code = <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="</span>;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (i &lt; text.length) &#123;</span><br><span class="line">    <span class="keyword">let</span> char1, char2, char3, enc1, enc2, enc3, enc4;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 三个字符一组，转二进制</span></span><br><span class="line">    char1 = text.charCodeAt(i++); </span><br><span class="line">    char2 = text.charCodeAt(i++);</span><br><span class="line">    char3 = text.charCodeAt(i++);</span><br><span class="line"></span><br><span class="line">    enc1 = char1 &gt;&gt; <span class="number">2</span>; <span class="comment">// 取第 1 字节的前 6 位</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 三个一组处理</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isNaN</span>(char2)) &#123;</span><br><span class="line">      <span class="comment">// 只有 1 字节的时候</span></span><br><span class="line">      enc2 = ((char1 &amp; <span class="number">3</span>) &lt;&lt; <span class="number">4</span>) | (<span class="number">0</span> &gt;&gt; <span class="number">4</span>);</span><br><span class="line">      <span class="comment">// 第65个字符用来代替补位的 = 号</span></span><br><span class="line">      enc3 = enc4 = <span class="number">64</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">isNaN</span>(char3)) &#123;</span><br><span class="line">      <span class="comment">// 只有 2 字节的时候</span></span><br><span class="line">      enc2 = ((char1 &amp; <span class="number">3</span>) &lt;&lt; <span class="number">4</span>) | (char2 &gt;&gt; <span class="number">4</span>);</span><br><span class="line">      enc3 = ((char2 &amp; <span class="number">15</span>) &lt;&lt; <span class="number">2</span>) | (<span class="number">0</span> &gt;&gt; <span class="number">6</span>);</span><br><span class="line">      enc4 = <span class="number">64</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      enc2 = ((char1 &amp; <span class="number">3</span>) &lt;&lt; <span class="number">4</span>) | (char2 &gt;&gt; <span class="number">4</span>); <span class="comment">// 取第 1 个字节的后 2 位(3 = 11 &lt;&lt; 4 = 110000) + 第 2 个字节的前 4 位</span></span><br><span class="line">      enc3 = ((char2 &amp; <span class="number">15</span>) &lt;&lt; <span class="number">2</span>) | (char3 &gt;&gt; <span class="number">6</span>); <span class="comment">// 取第 2 个字节的后 4 位 (15 = 1111 &lt;&lt; 2 = 111100) + 第 3 个字节的前 2 位</span></span><br><span class="line">      enc4 = char3 &amp; <span class="number">63</span>; <span class="comment">// 取最后一个字节的最后 6 位 (63 = 111111)</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 转base64</span></span><br><span class="line">    res += base64Code.charAt(enc1) + base64Code.charAt(enc2) + base64Code.charAt(enc3) + base64Code.charAt(enc4)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>简洁解法，字符转Base64-最优解（window.btoa，window.atob）atob 全称 ascii to binary</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> encodedData = <span class="built_in">window</span>.btoa(<span class="string">"this is a example"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(encodedData); <span class="comment">// dGhpcyBpcyBhIGV4YW1wbGU=</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> decodeData = <span class="built_in">window</span>.atob(encodedData);</span><br><span class="line"><span class="built_in">console</span>.log(decodeData); <span class="comment">// this is a example</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">node 端： toBase64:</span><br><span class="line">Buffer.from(<span class="string">'123'</span>).toString(<span class="string">'base64'</span>)</span><br><span class="line">decode:</span><br><span class="line">Buffer.from(<span class="string">'MTIz'</span>, <span class="string">'base64'</span>).toString()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">浏览器端： toBase64</span><br><span class="line">btoa(<span class="string">'123'</span>)</span><br><span class="line">decode</span><br><span class="line">atob(<span class="string">'MTIz'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="三、给一长串16进制数字，加密解密。"><a href="#三、给一长串16进制数字，加密解密。" class="headerlink" title="三、给一长串16进制数字，加密解密。"></a>三、给一长串16进制数字，加密解密。</h2><p>1、parseInt(string, radix)，parseInt() 函数可解析一个字符串，并返回一个整数。<br>2、radix可选。表示要解析的数字的基数。该值介于 2 ~ 36 之间。<br>3、如果省略该参数或其值为 0，则数字将以 10 为基础来解析。如果它以 “0x” 或 “0X” 开头，将以 16 为基数。<br>4、如果该参数小于 2 或者大于 36，则 parseInt() 将返回 NaN。<br>注释：只有字符串中的第一个数字会被返回。<br>注释：开头和结尾的空格是允许的。<br>提示：如果字符串的第一个字符不能被转换为数字，那么 parseFloat() 会返回 NaN。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">"10"</span>);			<span class="comment">//返回 10</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"19"</span>,<span class="number">10</span>);		<span class="comment">//返回 19 (10+9)</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"11"</span>,<span class="number">2</span>);		<span class="comment">//返回 3 (2+1)</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"17"</span>,<span class="number">8</span>);		<span class="comment">//返回 15 (8+7)</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"1f"</span>,<span class="number">16</span>);		<span class="comment">//返回 31 (16+15)</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"010"</span>);		<span class="comment">//未定：返回 10 或 8</span></span><br></pre></td></tr></table></figure>
<p>JavaScript fromCharCode() 方法<br>fromCharCode() 可接受一个指定的 Unicode 值，然后返回一个字符串。<br>注意：该方法是 String 的静态方法，字符串中的每个字符都由单独的 Unicode 数字编码指定。使用语法： String.fromCharCode()。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">将 Unicode 编码转为一个字符:</span><br><span class="line"><span class="keyword">var</span> n = <span class="built_in">String</span>.fromCharCode(<span class="number">65</span>);</span><br><span class="line">n 输出结果:</span><br><span class="line">A</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">将 Unicode 编码转换为一个字符串:</span><br><span class="line"><span class="keyword">var</span> n = <span class="built_in">String</span>.fromCharCode(<span class="number">72</span>,<span class="number">69</span>,<span class="number">76</span>,<span class="number">76</span>,<span class="number">79</span>);</span><br><span class="line">n 输出结果:</span><br><span class="line">HELLO</span><br></pre></td></tr></table></figure>
<p>加密解密代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"> $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> str=<span class="string">"function abc()&#123;alert('2234huangbiao')&#125;"</span>;</span><br><span class="line">        jiami(str);</span><br><span class="line">        <span class="keyword">var</span> codeStr = <span class="string">"66756e6374696f6e2061626328297b616c6572742827323233346875616e676269616f27297d"</span>;</span><br><span class="line">        <span class="keyword">var</span> lastStr = jiemi(codeStr);</span><br><span class="line">        <span class="built_in">eval</span>(<span class="string">"("</span> + lastStr + <span class="string">")()"</span>) ;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//对字符串加密</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">jiami</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line"><span class="comment">//        var str = "huangbiao";</span></span><br><span class="line">        <span class="comment">//获取字符串的字符长度</span></span><br><span class="line">        <span class="keyword">var</span> len = str.length;</span><br><span class="line">        <span class="keyword">var</span> result = <span class="string">""</span>;<span class="comment">//存放加密结果</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">            <span class="comment">//str.charCodeAt(i)获取str第i个字符的ASCII值</span></span><br><span class="line">            <span class="comment">//str.charCodeAt(i)).toString(16) 将ASCII码值转为16进制</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"str.charCodeAt(i) : "</span> + str.charCodeAt(i) +  <span class="string">" ----- parseInt(str.charCodeAt(i)).toString(16) : "</span> + <span class="built_in">parseInt</span>(str.charCodeAt(i)).toString(<span class="number">16</span>));</span><br><span class="line">            <span class="comment">//parseInt("241",16),将十六进制的值241转为10进制</span></span><br><span class="line">            result = result + <span class="built_in">parseInt</span>(str.charCodeAt(i)).toString(<span class="number">16</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">" result : "</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//对字符串解密</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">jiemi</span>(<span class="params">codeStr</span>)</span>&#123;</span><br><span class="line"><span class="comment">//        var codeStr = "6875616e676269616f";</span></span><br><span class="line">        <span class="keyword">var</span> strArray = codeStr.split(<span class="string">""</span>);</span><br><span class="line">        <span class="keyword">var</span> tempStr = <span class="string">""</span>;</span><br><span class="line">        <span class="comment">//保存最终将要得到的字符串</span></span><br><span class="line">        <span class="keyword">var</span> result = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;strArray.length;i++)&#123;</span><br><span class="line">            <span class="comment">//如果i不能够被2整除，则</span></span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> != <span class="number">0</span>)&#123;</span><br><span class="line">                tempStr = tempStr + strArray[i];</span><br><span class="line">                <span class="comment">//将得到的16进制字符串转为ASCII码，最终转为字母</span></span><br><span class="line">                <span class="keyword">var</span> _tempAsciiCode = <span class="built_in">parseInt</span>(tempStr,<span class="number">16</span>)</span><br><span class="line">                <span class="keyword">var</span> _tempChar = <span class="built_in">String</span>.fromCharCode(_tempAsciiCode);</span><br><span class="line">                result = result + _tempChar;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//如果i能够被2整除，则给tempStr重新赋值</span></span><br><span class="line">                tempStr = strArray[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"result : "</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


<h2 id="四、实现一个-normalize-函数，能将输入的特定的字符串转化为特定的结构化数据。"><a href="#四、实现一个-normalize-函数，能将输入的特定的字符串转化为特定的结构化数据。" class="headerlink" title="四、实现一个 normalize 函数，能将输入的特定的字符串转化为特定的结构化数据。"></a>四、实现一个 normalize 函数，能将输入的特定的字符串转化为特定的结构化数据。</h2><p><a href="https://www.jb51.net/tools/zhengze.html" target="_blank" rel="noopener">正则链接大全</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">字符串仅由小写字母和 [] 组成，且字符串不会包含多余的空格。</span><br><span class="line">示例一: <span class="string">'abc'</span> --&gt; &#123;<span class="attr">value</span>: <span class="string">'abc'</span>&#125;</span><br><span class="line">示例二：<span class="string">'[abc[bcd[def]]]'</span> --&gt; &#123;<span class="attr">value</span>: <span class="string">'abc'</span>, <span class="attr">children</span>: &#123;<span class="attr">value</span>: <span class="string">'bcd'</span>, <span class="attr">children</span>: &#123;<span class="attr">value</span>: <span class="string">'def'</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>1、正则表达式中 特色字符 . 表示匹配除 “\n” 之外的任何单个字符<br>2、. 的意思就是转义，变成一个字符<br>方法一：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">normalize</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> arr = s.match(<span class="regexp">/\w+/g</span>)<span class="comment">//拿到字母、数字、下划线等，先去括号，引号</span></span><br><span class="line">    <span class="keyword">let</span> result</span><br><span class="line">    <span class="keyword">while</span>(arr.length) &#123;</span><br><span class="line">        <span class="keyword">let</span> cur = arr.pop()<span class="comment">//从后面取更方便</span></span><br><span class="line">        <span class="keyword">let</span> temp = &#123;<span class="attr">value</span>: cur&#125;<span class="comment">//后面依次取出</span></span><br><span class="line">        <span class="keyword">if</span>(result) &#123;</span><br><span class="line">            temp.children = result<span class="comment">//递归放到对象的孩子属性中</span></span><br><span class="line">        &#125;</span><br><span class="line">        result = temp<span class="comment">//初始放入</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result<span class="comment">//数组遍历完成后，返回结果</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">'abc'</span></span><br><span class="line">normalize(s) <span class="comment">// &#123;value: "abc"&#125;</span></span><br><span class="line"></span><br><span class="line">s = <span class="string">'[abc[bcd[def]]]'</span></span><br><span class="line">normalize(s) </span><br><span class="line"><span class="comment">// &#123;value: 'abc', children: &#123;value: 'bcd', children: &#123;value: 'def'&#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure>
<p>方法二：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">normalize</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> list = str.match(<span class="regexp">/\w+/g</span>)<span class="comment">//去括号</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">list</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(list.length === <span class="number">1</span>)&#123;<span class="comment">//没有孩子的情况</span></span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">            value: list[<span class="number">0</span>]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> res = &#123;&#125;<span class="comment">//有孩子的情况，</span></span><br><span class="line">        <span class="keyword">const</span> item = list.pop();</span><br><span class="line">        res = &#123;</span><br><span class="line">          value: item,</span><br><span class="line">          children: fn(list)<span class="comment">//递归调用</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res<span class="comment">//返回结果</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> fn(list)<span class="comment">//函数调用</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="五、实现-convert-方法，把原始-list-转换成树形结构，要求尽可能降低时间复杂度"><a href="#五、实现-convert-方法，把原始-list-转换成树形结构，要求尽可能降低时间复杂度" class="headerlink" title="五、实现 convert 方法，把原始 list 转换成树形结构，要求尽可能降低时间复杂度"></a>五、实现 convert 方法，把原始 list 转换成树形结构，要求尽可能降低时间复杂度</h2><p>以下数据结构中，id 代表部门编号，name 是部门名称，parentId 是父部门编号，为 0 代表一级部门，现在要求实现一个 convert 方法，把原始 list 转换成树形结构，parentId 为多少就挂载在该 id 的属性 children 数组下，结构如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>() 方法为 Map 对象添加或更新一个指定了键（key）和值（value）的（新）键值对。</span><br><span class="line">const map1 = new Map();</span><br><span class="line">map1.<span class="keyword">set</span>('bar', 'foo');</span><br><span class="line"></span><br><span class="line">console.log(map1.<span class="keyword">get</span>('bar'));</span><br><span class="line">// expected output: "foo"</span><br><span class="line"></span><br><span class="line">console.log(map1.<span class="keyword">get</span>('baz'));</span><br><span class="line">// expected output: undefined</span><br></pre></td></tr></table></figure>


<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原始 list 如下</span></span><br><span class="line"><span class="keyword">let</span> list =[</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">name</span>:<span class="string">'部门A'</span>,<span class="attr">parentId</span>:<span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">2</span>,<span class="attr">name</span>:<span class="string">'部门B'</span>,<span class="attr">parentId</span>:<span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">3</span>,<span class="attr">name</span>:<span class="string">'部门C'</span>,<span class="attr">parentId</span>:<span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">4</span>,<span class="attr">name</span>:<span class="string">'部门D'</span>,<span class="attr">parentId</span>:<span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">5</span>,<span class="attr">name</span>:<span class="string">'部门E'</span>,<span class="attr">parentId</span>:<span class="number">2</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">6</span>,<span class="attr">name</span>:<span class="string">'部门F'</span>,<span class="attr">parentId</span>:<span class="number">3</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">7</span>,<span class="attr">name</span>:<span class="string">'部门G'</span>,<span class="attr">parentId</span>:<span class="number">2</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">8</span>,<span class="attr">name</span>:<span class="string">'部门H'</span>,<span class="attr">parentId</span>:<span class="number">4</span>&#125;</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> result = convert(list, ...);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 转换后的结果如下</span></span><br><span class="line"><span class="keyword">let</span> result = [</span><br><span class="line">    &#123;</span><br><span class="line">      id: <span class="number">1</span>,</span><br><span class="line">      name: <span class="string">'部门A'</span>,</span><br><span class="line">      parentId: <span class="number">0</span>,</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: <span class="number">3</span>,</span><br><span class="line">          name: <span class="string">'部门C'</span>,</span><br><span class="line">          parentId: <span class="number">1</span>,</span><br><span class="line">          children: [</span><br><span class="line">            &#123;</span><br><span class="line">              id: <span class="number">6</span>,</span><br><span class="line">              name: <span class="string">'部门F'</span>,</span><br><span class="line">              parentId: <span class="number">3</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">              id: <span class="number">16</span>,</span><br><span class="line">              name: <span class="string">'部门L'</span>,</span><br><span class="line">              parentId: <span class="number">3</span></span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: <span class="number">4</span>,</span><br><span class="line">          name: <span class="string">'部门D'</span>,</span><br><span class="line">          parentId: <span class="number">1</span>,</span><br><span class="line">          children: [</span><br><span class="line">            &#123;</span><br><span class="line">              id: <span class="number">8</span>,</span><br><span class="line">              name: <span class="string">'部门H'</span>,</span><br><span class="line">              parentId: <span class="number">4</span></span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">  ···</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>思路：<br>1、使用Map保存id和对象的映射，循环list，根据parentId在Map里取得父节点。<br>2、如果父节点有children属性，就直接push当前的子节点。<br>3、如果没有就添加children属性。<br>4、最后遍历一遍list把parentId===0的节点取出来。</p>
<p>方法一：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> convert = <span class="function"><span class="params">list</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();<span class="comment">//存到map里面</span></span><br><span class="line">  <span class="keyword">let</span> result = []</span><br><span class="line">  list.forEach(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">    map.set(el.id, el);<span class="comment">//id是唯一属性，存整个对象</span></span><br><span class="line">  &#125;);</span><br><span class="line">  list.forEach(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">let</span> parent = map.get(el.parentId);<span class="comment">//遍历每一个对象，拿到父亲的ID，一个父亲可能有多个孩子</span></span><br><span class="line">		<span class="keyword">if</span> (!parent) &#123;<span class="comment">//没有父亲，初始为空</span></span><br><span class="line">			<span class="comment">// parentId === 0</span></span><br><span class="line">			el.children = []</span><br><span class="line">			<span class="keyword">return</span> </span><br><span class="line">		&#125;</span><br><span class="line">    <span class="keyword">if</span> (parent.hasOwnProperty(<span class="string">'children'</span>)) &#123;</span><br><span class="line">      parent.children.push(el);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      parent[<span class="string">'children'</span>] = [];<span class="comment">//申请一个数组</span></span><br><span class="line">      parent.children.push(el);<span class="comment">//添加属性</span></span><br><span class="line">    &#125;</span><br><span class="line">	&#125;);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">		<span class="keyword">const</span> el = list[i];</span><br><span class="line">		<span class="keyword">if</span> (el.parentId === <span class="number">0</span>) &#123;</span><br><span class="line">			result.push(el)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> list = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">'部门A'</span>, <span class="attr">parentId</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">'部门B'</span>, <span class="attr">parentId</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">'部门C'</span>, <span class="attr">parentId</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">'部门D'</span>, <span class="attr">parentId</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">5</span>, <span class="attr">name</span>: <span class="string">'部门E'</span>, <span class="attr">parentId</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">6</span>, <span class="attr">name</span>: <span class="string">'部门F'</span>, <span class="attr">parentId</span>: <span class="number">3</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">7</span>, <span class="attr">name</span>: <span class="string">'部门G'</span>, <span class="attr">parentId</span>: <span class="number">2</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">8</span>, <span class="attr">name</span>: <span class="string">'部门H'</span>, <span class="attr">parentId</span>: <span class="number">4</span> &#125;</span><br><span class="line">];</span><br><span class="line">convert(list)</span><br></pre></td></tr></table></figure>
<p>方法二</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">convert</span>(<span class="params">list</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> res = []</span><br><span class="line">	<span class="keyword">const</span> map = list.reduce(<span class="function">(<span class="params">res, v</span>) =&gt;</span> (res[v.id] = v, res), &#123;&#125;)</span><br><span class="line">	<span class="comment">//初始化为空，遍历每一个对象，将当前值变成键值对存起来，</span></span><br><span class="line">	<span class="comment">//每一项对象的id唯一作为key,把值不变存起来，下一个不断累加</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> list) &#123;</span><br><span class="line">		<span class="keyword">if</span> (item.parentId === <span class="number">0</span>) &#123;</span><br><span class="line">			res.push(item)</span><br><span class="line">			<span class="keyword">continue</span><span class="comment">//首级部门</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (item.parentId <span class="keyword">in</span> map) &#123;</span><br><span class="line">			<span class="keyword">const</span> parent = map[item.parentId]<span class="comment">//找到那个应该挂载的对象</span></span><br><span class="line">			parent.children = parent.children || []；<span class="comment">//比较好的写法，没有就初始为空，有就更新</span></span><br><span class="line">			parent.children.push(item)<span class="comment">//挂载上去</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span></span><br><span class="line"></span><br><span class="line">.map()方法使用在：</span><br><span class="line"><span class="number">1.</span>用可迭代的每个值执行一组语句；<span class="number">2.</span>返回(可能)修改值。</span><br><span class="line"></span><br><span class="line">用一个简单的示例来计算一系列价格的营业税：</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> prices = [<span class="number">19.99</span>, <span class="number">4.95</span>, <span class="number">25</span>, <span class="number">3.50</span>];</span><br><span class="line"><span class="keyword">let</span> new_prices = [];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i &lt; prices.length; i++) &#123;</span><br><span class="line">new_prices.push(prices[i] * <span class="number">1.06</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">用.map()方法可以得出同样的结果：</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> prices= [<span class="number">19.99</span>, <span class="number">4.95</span>, <span class="number">25</span>, <span class="number">3.50</span>];</span><br><span class="line"><span class="keyword">let</span> new_prices = prices.map(<span class="function"><span class="params">price</span> =&gt;</span> price *<span class="number">1.06</span>);</span><br><span class="line"></span><br><span class="line">上面的语法简明扼要，所以简单过一遍即可。</span><br><span class="line"></span><br><span class="line">.map()函数采用回调，可以将其视为一个函数，这便是括号之间的含义。</span><br><span class="line"></span><br><span class="line">price变量用于标识每个值的名称，由于只有一个变量输入，所以可以省略参数周围的常用括号。</span><br><span class="line"></span><br><span class="line">箭头=&gt;后的语句是回调的主体。由于主体只有一条语句，可以省略大括号和<span class="keyword">return</span>关键字。</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> prices= [<span class="number">19.99</span>, <span class="number">4.95</span>, <span class="number">25</span>, <span class="number">3.50</span>];</span><br><span class="line"><span class="keyword">let</span> new_prices = prices.map(<span class="function">(<span class="params">price</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> price * <span class="number">1.06</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Filter</span><br><span class="line"></span><br><span class="line">当要从可迭代对象中提取值的子集时，.filter() 方法就派上了用场。</span><br><span class="line">使用.filter()时，请记住是在筛选值，而不是筛除值。</span><br><span class="line">这就意味着，迭代器中评估为<span class="literal">true</span>的每个项目，都将包含在过滤器中。</span><br><span class="line">举一个只保留奇数的例子：使用模运算符来计算除以<span class="number">2</span>的余数。</span><br><span class="line">当余数等于<span class="number">1</span>，就得知这个数是奇数。</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>];</span><br><span class="line"><span class="keyword">let</span> odds = [];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i &lt; numbers.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(numbers[i] % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">odds.push(numbers[i]);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">与.map()类似，.filter()可以接受单个回调，以将可迭代对象中的每个值传递到该回调。</span><br><span class="line"></span><br><span class="line">constnumbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>];<span class="keyword">let</span> odds = numbers.filter(<span class="function"><span class="params">num</span> =&gt;</span> num % <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">此回调也适用类似的规则。</span><br><span class="line">由于只有一个输入，且函数的主体是单个表达式，因此可以省略参数列表括号、定义主体的大括号和<span class="keyword">return</span>关键字。</span><br><span class="line"></span><br><span class="line">Reduce</span><br><span class="line"></span><br><span class="line">最后，来看看.reduce()。</span><br><span class="line">。从术语名称来看，Reduce方法是指将多个值缩减为一个。</span><br><span class="line">与“减少”相比，把它想成是“积累”更容易操作。</span><br><span class="line">该方法通过定义起点来运行。当该方法迭代每个值时，该起点将被修改并向下传递。</span><br><span class="line">这是将一系列数字相加的经典案例。</span><br><span class="line">假设正在计算某人最喜欢的慈善机构的捐款总额：</span><br><span class="line"></span><br><span class="line">constdonations = [<span class="number">5</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">80</span>, <span class="number">75</span>];</span><br><span class="line"><span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i &lt; donations.length; i++) &#123;</span><br><span class="line">total += donations[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">与.map()和.filter()不同，</span><br><span class="line">.reduce()方法的回调需要两个参数：累加器和当前值。</span><br><span class="line">累加器将是第一个参数，是“向下传递”值。</span><br><span class="line"></span><br><span class="line">constdonations = [<span class="number">5</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">80</span>, <span class="number">75</span>];<span class="keyword">let</span> total = donations.reduce(<span class="function">(<span class="params">total,donation</span>)=&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> total + donation;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">还可以将第二个参数传递给 .reduce()函数本身，作为累加器的起始值。</span><br><span class="line">假设加上昨天总共<span class="number">450</span>美元的捐款。</span><br><span class="line"></span><br><span class="line">constdonations = [<span class="number">5</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">80</span>, <span class="number">75</span>];<span class="keyword">let</span> total = donations.reduce(<span class="function">(<span class="params">total,donation</span>)=&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> total + donation;</span><br><span class="line">&#125;, <span class="number">450</span>);</span><br></pre></td></tr></table></figure>
<p><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Array/reduce" target="_blank" rel="noopener">MDN   reduce</a></p>
<h2 id="六、已知数据格式，实现一个函数-fn-找出链条中所有的父级-id"><a href="#六、已知数据格式，实现一个函数-fn-找出链条中所有的父级-id" class="headerlink" title="六、已知数据格式，实现一个函数 fn 找出链条中所有的父级 id"></a>六、已知数据格式，实现一个函数 fn 找出链条中所有的父级 id</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = <span class="string">'112'</span></span><br><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line">fn(value) <span class="comment">// 输出 [1， 11， 112]</span></span><br></pre></td></tr></table></figure>
<img src="https://img-blog.csdnimg.cn/20200503152638100.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMTc3MzYx,size_16,color_FFFFFF,t_70#pic_center " width="25%">
转换成求子集！！

<blockquote>
<p>方法一思路：<br> bfs利用队列实现，循环中做的是push =&gt; shift =&gt; push =&gt; shift<br>dfs利用栈实现，循环中做的是push =&gt; pop =&gt; push =&gt; pop</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">最简洁的做法：</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">data, value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> res = []</span><br><span class="line">  <span class="keyword">const</span> dfs = <span class="function">(<span class="params">arr, temp = []</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> node <span class="keyword">of</span> arr) &#123;</span><br><span class="line">      <span class="keyword">if</span> (node.children) &#123;</span><br><span class="line">        dfs(node.children, temp.concat(node.id))</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node.id === value) &#123;</span><br><span class="line">          res = temp</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  dfs(data)</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">尝试两种方法</span><br></pre></td></tr></table></figure>


<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bfs</span>(<span class="params">target, id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> quene = [...target]  <span class="comment">//[1,1,2]</span></span><br><span class="line">  <span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> current = quene.shift()<span class="comment">//从队头出发</span></span><br><span class="line">    <span class="keyword">if</span> (current.children) &#123;</span><br><span class="line">      quene.push(...current.children.map(<span class="function"><span class="params">x</span> =&gt;</span> (&#123; ...x, <span class="attr">path</span>: (current.path || current.id) + <span class="string">'-'</span> + x.id &#125;)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (current.id === id) &#123;</span><br><span class="line">      <span class="keyword">return</span> current</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">while</span>(quene.length)</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dfs</span>(<span class="params">target, id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> stask = [...target]</span><br><span class="line">  <span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> current = stask.pop()</span><br><span class="line">    <span class="keyword">if</span> (current.children) &#123;</span><br><span class="line">      stask.push(...current.children.map(<span class="function"><span class="params">x</span> =&gt;</span> (&#123; ...x, <span class="attr">path</span>: (current.path || current.id) + <span class="string">'-'</span> + x.id &#125;)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (current.id === id) &#123;</span><br><span class="line">      <span class="keyword">return</span> current</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">while</span>(stask.length)</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 公共的搜索方法，默认bfs</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">commonSearch</span>(<span class="params">target, id, mode</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> staskOrQuene = [...target]</span><br><span class="line">  <span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> current = staskOrQuene[mode === <span class="string">'dfs'</span> ? <span class="string">'pop'</span> : <span class="string">'shift'</span>]()</span><br><span class="line">    <span class="keyword">if</span> (current.children) &#123;</span><br><span class="line">      staskOrQuene.push(...current.children.map(<span class="function"><span class="params">x</span> =&gt;</span> (&#123; ...x, <span class="attr">path</span>: (current.path || current.id) + <span class="string">'-'</span> + x.id &#125;)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (current.id === id) &#123;</span><br><span class="line">      <span class="keyword">return</span> current</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">while</span>(staskOrQuene.length)</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方法二思路：<br>1、找到子节点，再回溯找父节点<br>2、复杂度是O(n)，循环n次子节点，但是需要额外空间记录父节点的引用。<br><a href="https://www.cnblogs.com/sunshineForFuture/p/10432440.html" target="_blank" rel="noopener">symbol注意点</a><br><a href="https://www.jianshu.com/p/f40a77bbd74e" target="_blank" rel="noopener">symbol的几点利用</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 回溯的标记</span></span><br><span class="line">    <span class="keyword">let</span> _p = <span class="built_in">Symbol</span>(<span class="string">'parent'</span>);<span class="comment">//通过调用Symbol()函数来创建一个Symbol实例：记录父节点的引用</span></span><br><span class="line">    <span class="comment">//每个Symbol实例都是唯一的。因此，当比较两个Symbol实例的时候，将总会返回false：</span></span><br><span class="line">    <span class="comment">// 找到子节点</span></span><br><span class="line">    <span class="keyword">let</span> result;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">_fn</span>(<span class="params">arr, p</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            arr[i][_p] = p;</span><br><span class="line">            <span class="keyword">if</span> (arr[i].id === value) &#123;</span><br><span class="line">                result = arr[i];</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            !result &amp;&amp; arr[i].children &amp;&amp; _fn(arr[i].children, arr[i])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (result) <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    _fn(list, <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">let</span> tmp = [];</span><br><span class="line">    <span class="keyword">if</span> (!result) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (result) &#123;</span><br><span class="line">        tmp.unshift(result.id);</span><br><span class="line">        result = result[_p];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="七、写个程序把-entry-转换成如下对象"><a href="#七、写个程序把-entry-转换成如下对象" class="headerlink" title="七、写个程序把 entry 转换成如下对象"></a>七、写个程序把 entry 转换成如下对象</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> entry = &#123;</span><br><span class="line">  a: &#123;</span><br><span class="line">    b: &#123;</span><br><span class="line">      c: &#123;</span><br><span class="line">        dd: <span class="string">'abcdd'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    d: &#123;</span><br><span class="line">      xx: <span class="string">'adxx'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    e: <span class="string">'ae'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 要求转换成如下对象</span></span><br><span class="line"><span class="keyword">var</span> output = &#123;</span><br><span class="line">  <span class="string">'a.b.c.dd'</span>: <span class="string">'abcdd'</span>,</span><br><span class="line">  <span class="string">'a.d.xx'</span>: <span class="string">'adxx'</span>,</span><br><span class="line">  <span class="string">'a.e'</span>: <span class="string">'ae'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法一：<br>1、对象扁平化<br>2、注意前后格式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatObj</span>(<span class="params">obj, parentKey = <span class="string">""</span>, result = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">      <span class="keyword">let</span> keyName = <span class="string">`<span class="subst">$&#123;parentKey&#125;</span><span class="subst">$&#123;key&#125;</span>`</span>;<span class="comment">//按照题目要求来！</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> obj[key] === <span class="string">'object'</span>)<span class="comment">//考虑到多级嵌套的情况</span></span><br><span class="line">        flatObj(obj[key], keyName+<span class="string">"."</span>, result)<span class="comment">//扁平化，递归</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        result[keyName] = obj[key];<span class="comment">//一层直接OK</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法二：<br>BFS   队列</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatObj</span>(<span class="params">entry</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> queue = <span class="built_in">Object</span>.entries(entry)<span class="comment">//队列存储</span></span><br><span class="line">	<span class="keyword">const</span> res = &#123;&#125;</span><br><span class="line">	<span class="keyword">while</span> (queue.length) &#123;<span class="comment">//循环存</span></span><br><span class="line">		<span class="keyword">const</span> [key, obj] = queue.pop()<span class="comment">//队头出一个就放到数组中</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">const</span> [k, v] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(obj)) &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">typeof</span> v !== <span class="string">'object'</span>) &#123;<span class="comment">//遍历不是对象嵌套就直接放入</span></span><br><span class="line">				res[<span class="string">`<span class="subst">$&#123;key&#125;</span>.<span class="subst">$&#123;k&#125;</span>`</span>] = v</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				queue.push([<span class="string">`<span class="subst">$&#123;key&#125;</span>.<span class="subst">$&#123;k&#125;</span>`</span>, v])<span class="comment">//是层级嵌套就累加统计</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="八、写个程序把-entry-转换成如下对象（跟上题相反）"><a href="#八、写个程序把-entry-转换成如下对象（跟上题相反）" class="headerlink" title="八、写个程序把 entry 转换成如下对象（跟上题相反）"></a>八、写个程序把 entry 转换成如下对象（跟上题相反）</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> entry = &#123;</span><br><span class="line">  <span class="string">'a.b.c.dd'</span>: <span class="string">'abcdd'</span>,</span><br><span class="line">  <span class="string">'a.d.xx'</span>: <span class="string">'adxx'</span>,</span><br><span class="line">  <span class="string">'a.e'</span>: <span class="string">'ae'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 要求转换成如下对象</span></span><br><span class="line"><span class="keyword">var</span> output = &#123;</span><br><span class="line">  a: &#123;</span><br><span class="line">    b: &#123;</span><br><span class="line">      c: &#123;</span><br><span class="line">        dd: <span class="string">'abcdd'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    d: &#123;</span><br><span class="line">      xx: <span class="string">'adxx'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    e: <span class="string">'ae'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法一思路：<br>1、对象entry的key中含有的.就是一个对象嵌套，所以可以用split()函数将其划分为一个array。<br>2、array的length - 1下标所对应的元素就是entry的一个key的具体值。<br>3、利用对象为地址引用原理，填充元素。<br>4、采用reduce函数，将每一次的引用返回。<br>注意：Object.keys() 方法会返回一个由一个给定对象的自身可枚举属性组成的数组，<br>数组中属性名的排列顺序和使用 for…in 循环遍历该对象时返回的顺序一致 。<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" target="_blank" rel="noopener">MDN</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> entry = &#123;</span><br><span class="line">  <span class="string">'a.b.c.dd'</span>: <span class="string">'abcdd'</span>,</span><br><span class="line">  <span class="string">'a.d.xx'</span>: <span class="string">'adxx'</span>,</span><br><span class="line">  <span class="string">'a.e'</span>: <span class="string">'ae'</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> changObjStructureOfNormal = <span class="function"><span class="params">output</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(entry);<span class="comment">//keys是"a.b.c.dd"等的组合起来的数组</span></span><br><span class="line">  <span class="keyword">const</span> resObj = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">of</span> keys) &#123;<span class="comment">//遍历数组</span></span><br><span class="line">    <span class="keyword">const</span> everyKey = key.split(<span class="string">'.'</span>);<span class="comment">//取出每一项，再分开，找到[a,b,c,dd]</span></span><br><span class="line">    everyKey.reduce(<span class="function">(<span class="params">pre, next, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (index === array.length - <span class="number">1</span>) &#123;</span><br><span class="line">        pre[next] = output[key];</span><br><span class="line">        <span class="keyword">return</span>;<span class="comment">//转变格式，直到遍历完数组</span></span><br><span class="line">      &#125;</span><br><span class="line">      pre[next] = pre[next] || &#123;&#125;;</span><br><span class="line">      <span class="keyword">return</span> pre[next];</span><br><span class="line">    &#125;, resObj);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> resObj;</span><br><span class="line">&#125;;</span><br><span class="line">changObjStructureOfNormal(entry);</span><br></pre></td></tr></table></figure>
<p>同样的思路，更简洁的写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> entry = &#123;</span><br><span class="line">    <span class="string">'a.b.c.dd'</span>: <span class="string">'abcdd'</span>,</span><br><span class="line">    <span class="string">'a.d.xx'</span>: <span class="string">'adxx'</span>,</span><br><span class="line">    <span class="string">'a.e'</span>: <span class="string">'ae'</span>,</span><br><span class="line">    <span class="string">'d.e.x'</span>: <span class="string">'dex'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.keys(entry).map(<span class="function">(<span class="params">keyName</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> keyName.split(<span class="string">'.'</span>);</span><br><span class="line">&#125;).forEach(<span class="function"><span class="params">keysArr</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> currObj = obj;</span><br><span class="line">    <span class="keyword">const</span> keysArrLength = keysArr.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keysArrLength; i += <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> keyItem = keysArr[i];</span><br><span class="line">        <span class="keyword">if</span> (!currObj[keyItem]) &#123;</span><br><span class="line">            currObj[keyItem] = i !== keysArrLength - <span class="number">1</span> ? &#123;&#125; : entry[keysArr.join(<span class="string">'.'</span>)];</span><br><span class="line">        &#125;</span><br><span class="line">        currObj = currObj[keyItem];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br></pre></td></tr></table></figure>
<p>方法二：<br>1、使用正则，其实就是object.keys的原理。<br>2、没有调用上述方法，自己写一个。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 将路径分解成数组 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pathToArray</span> (<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(path) ? path : path.replace(<span class="regexp">/\[/g</span>, <span class="string">'.'</span>).replace(<span class="regexp">/\]/g</span>, <span class="string">''</span>).split(<span class="string">'.'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 设置 object对象中对应 `path` 属性路径上的值 */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">set</span> (<span class="params">object, path, value</span>) </span>&#123;</span><br><span class="line">  path = pathToArray(path)</span><br><span class="line">  path.reduce(<span class="function">(<span class="params">data, key, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (index !== path.length - <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!data[key]) &#123; data[key] = &#123;&#125; &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      data[key] = value</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> data[key]</span><br><span class="line">  &#125;, object)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="九、求两个日期中间的有效日期"><a href="#九、求两个日期中间的有效日期" class="headerlink" title="九、求两个日期中间的有效日期"></a>九、求两个日期中间的有效日期</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如 <span class="number">2015</span><span class="number">-2</span><span class="number">-8</span> 到 <span class="number">2015</span><span class="number">-3</span><span class="number">-3</span>，返回【<span class="number">2015</span><span class="number">-2</span><span class="number">-8</span> <span class="number">2015</span><span class="number">-2</span><span class="number">-9.</span>..】</span><br></pre></td></tr></table></figure>
<p>注意兼容和格式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toDateList</span>(<span class="params">startTime, endTime</span>) </span>&#123;</span><br><span class="line">       <span class="comment">// 2019-1-1 这种格式在ios是不兼容的Invalid Date。</span></span><br><span class="line">       <span class="keyword">let</span> startTimeStamp = <span class="keyword">new</span> <span class="built_in">Date</span>(startTime.replace(<span class="regexp">/-/g</span>, <span class="string">'/'</span>)).getTime(),</span><br><span class="line">         endTimeStamp = <span class="keyword">new</span> <span class="built_in">Date</span>(endTime.replace(<span class="regexp">/-/g</span>, <span class="string">'/'</span>)).getTime(),</span><br><span class="line">         dateList = []</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (startTimeStamp &gt; endTimeStamp) &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">while</span> (startTimeStamp !== endTimeStamp) &#123;</span><br><span class="line">         startTimeStamp += <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span><span class="comment">//单位是ms</span></span><br><span class="line"></span><br><span class="line">         <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(startTimeStamp)</span><br><span class="line">           .toLocaleDateString()</span><br><span class="line">           .replace(<span class="regexp">/\//g</span>, <span class="string">'-'</span>)<span class="comment">//兼容转换</span></span><br><span class="line"></span><br><span class="line">         dateList.push(date)</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> dateList</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="built_in">console</span>.log(toDateList(<span class="string">'2015-2-8'</span>, <span class="string">'2015-3-9'</span>))</span><br></pre></td></tr></table></figure>

<h2 id="十、将’10000000000’形式的字符串，以每3位进行分隔展示’10-000-000-000’-多种实现方式"><a href="#十、将’10000000000’形式的字符串，以每3位进行分隔展示’10-000-000-000’-多种实现方式" class="headerlink" title="十、将’10000000000’形式的字符串，以每3位进行分隔展示’10.000.000.000’,多种实现方式"></a>十、将’10000000000’形式的字符串，以每3位进行分隔展示’10.000.000.000’,多种实现方式</h2><p>方法一：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myNum = <span class="built_in">Number</span>(<span class="string">'10000000000'</span>); </span><br><span class="line"><span class="comment">//字符串转数字后就可以使用toLocaleString()！</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num2Str = myNum .toLocaleString();</span><br><span class="line"> <span class="comment">//"10,000,000,000"</span></span><br><span class="line"></span><br><span class="line">num2Str.replace(<span class="regexp">/,/g</span>, <span class="string">"."</span>);</span><br><span class="line"> <span class="comment">//"10.000.000.000"</span></span><br></pre></td></tr></table></figure>
<p>方法二：正则</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">正则中的^表示开头，$表示结束</span><br><span class="line">^\d+$ 匹配的字符串只能是数字，开头结尾都是数字，</span><br><span class="line">那么就只能匹配： <span class="number">1</span> 、 <span class="number">12</span>、 <span class="number">123.</span>...等等</span><br><span class="line">\d+$匹配结尾是数字：比如版 ：abc123</span><br><span class="line">^\d+ 匹配开头是数字，比如：<span class="number">123</span>abc</span><br></pre></td></tr></table></figure>

<p><a href="https://www.jianshu.com/p/9c4979a3b7e4" target="_blank" rel="noopener">正则好文</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str= <span class="string">'10000000000'</span>;</span><br><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/(?!^)(?=(\d&#123;3&#125;)+$)/g</span>;</span><br><span class="line">str.replace(reg, <span class="string">'.'</span>) </span><br><span class="line"><span class="comment">// "10.000.000.000"</span></span><br></pre></td></tr></table></figure>


<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 寻找字符空隙加 .</span></span><br><span class="line"><span class="string">'10000000000'</span>.replace(<span class="regexp">/\B(?=(\d&#123;3&#125;)+(?!\d))/g</span>, <span class="string">'.'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 寻找数字并在其后面加 . </span></span><br><span class="line"><span class="string">'10000000000'</span>.replace(<span class="regexp">/(\d)(?=(\d&#123;3&#125;)+\b)/g</span>, <span class="string">'$1.'</span>)</span><br></pre></td></tr></table></figure>


<blockquote>
<p>小数需求：</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">parseToMoney(<span class="number">1234.56</span>); <span class="comment">// return '1,234.56' </span></span><br><span class="line">parseToMoney(<span class="number">123456789</span>); <span class="comment">// return '123,456,789'</span></span><br><span class="line">parseToMoney(<span class="number">1087654.321</span>); <span class="comment">// return '1,087,654.321'</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseToMoney</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line"> num = <span class="built_in">parseFloat</span>(num.toFixed(<span class="number">3</span>)); </span><br><span class="line"> <span class="keyword">let</span> [integer, decimal] = <span class="built_in">String</span>.prototype.split.call(num, <span class="string">'.'</span>); </span><br><span class="line"> integer = integer.replace(<span class="regexp">/\d(?=(\d&#123;3&#125;)+$)/g</span>, <span class="string">'$&amp;,'</span>); </span><br><span class="line"> <span class="keyword">return</span> integer + <span class="string">'.'</span> + (decimal ? decimal : <span class="string">''</span>); &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseToMoney</span>(<span class="params">str</span>)</span>&#123; <span class="comment">// 仅仅对位置进⾏匹配 </span></span><br><span class="line"><span class="keyword">let</span> re = <span class="regexp">/(?=(?!\b)(\d&#123;3&#125;)+$)/g</span>; </span><br><span class="line"><span class="keyword">return</span> str.replace(re,<span class="string">','</span>); &#125;</span><br></pre></td></tr></table></figure>

<p>**</p>
<blockquote>
<p>正向与反向预查</p>
</blockquote>
<p>**</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"Swift1 Swift2 Swift3Swift4Swift4Swift4"</span></span><br><span class="line">(Swift4) 匹配Swift4并获取这一匹配，然后存储供以后使用；</span><br><span class="line"></span><br><span class="line">(Swift4)\<span class="number">1</span> 匹配Swift4，其中\<span class="number">1</span>即表示使用了存储的匹配(存储的第一个匹配)，相当于匹配两次Swift4；</span><br><span class="line"></span><br><span class="line">(Swift3)(Swift4)\<span class="number">2</span> 匹配Swift3Swift4Swift4，其中\<span class="number">2</span>即表示使用了存储的第二个匹配，即Swift4(当然第一个匹配为：Swift3)；</span><br><span class="line"></span><br><span class="line">(?:Swift3)(Swift4)\<span class="number">1</span> 匹配Swift3Swift4Swift4，与(Swift3)(Swift4)\<span class="number">2</span>相同；</span><br><span class="line">由于在小括号中使用了?:，所以第一个匹配(Swift3)没有被存储，只存储了后面的第二个匹配(Swift4)；</span><br><span class="line">若写成(?:Swift3)(Swift4)\<span class="number">2</span>，则正则表达式错误，因为没有存储第二个匹配；</span><br><span class="line">其中?:的作用是匹配Swift3模式字符串，但不会存储该匹配。</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Swift(?=<span class="number">4</span>) 匹配右边紧跟着<span class="number">4</span>的Swift；</span><br><span class="line">其中(?=)称为：正向预查匹配，</span><br><span class="line">(?=<span class="number">4</span>)表示先看看有没有<span class="number">4</span>，如果有，则把<span class="number">4</span>左边的Swift匹配出来；</span><br><span class="line">如果没有，则继续向右查看，这个过程就是正向预查匹配。</span><br><span class="line"></span><br><span class="line">(?=expression)可理解为：匹配字符串expression前面的位置。</span><br><span class="line"></span><br><span class="line">Swift(?!<span class="number">4</span>) 匹配右边不跟着<span class="number">4</span>的Swift；</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">其中(?!)称为：正向预查不匹配，</span><br><span class="line">(?!<span class="number">4</span>)表示先看看有没有<span class="number">4</span>，如果没有，也即不等于<span class="number">4</span>的情况，则把左边的Swift匹配出来；</span><br><span class="line">如果有，则继续向右查看，这个过程就是正向预查不匹配。</span><br><span class="line"></span><br><span class="line">(?!expression)可理解为：匹配后面不是字符串expression的位置。</span><br></pre></td></tr></table></figure>


<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(?&lt;=<span class="number">4</span>)Swift 匹配左边紧跟着<span class="number">4</span>的Swift，即第五个Swift单词，索引为<span class="number">26</span>到<span class="number">30</span>的字符；</span><br><span class="line">其中(?&lt;=)称为：反向预查匹配，</span><br><span class="line">(?&lt;=<span class="number">4</span>)表示先看看有没有<span class="number">4</span>，如果有，则把<span class="number">4</span>右边的Swift匹配出来；</span><br><span class="line">如果没有，则继续向右查看，这个过程就是反向预查匹配。</span><br><span class="line">(?&lt;=expression)可理解为：匹配字符串expression后面的位置。</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(?&lt;!<span class="number">4</span>)Swift 匹配左边不跟着<span class="number">4</span>的Swift，即第<span class="number">1</span>、<span class="number">2</span>、<span class="number">3</span>、<span class="number">4</span>、<span class="number">6</span>个Swift单词；</span><br><span class="line">其中(?&lt;!)称为：反向预查不匹配，</span><br><span class="line">(?&lt;!<span class="number">4</span>)表示先看看有没有<span class="number">4</span>，如果没有，也即不等于<span class="number">4</span>的情况，则把右边的Swift匹配出来；</span><br><span class="line">如果有，则继续向右查看，这个过程就是反向预查不匹配。</span><br><span class="line">(?&lt;!expression)可理解为：匹配前面不是字符串expression的位置。</span><br></pre></td></tr></table></figure>
<p>看例子，秒懂哈：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">例子：</span><br><span class="line"><span class="number">1</span>、想匹配一个“人”字，但是只想匹配中国人的人字，不想匹配法国人的人，就可以用一下表达式</span><br><span class="line">(?=中国)人</span><br><span class="line"><span class="number">2</span>、(?=.*[a-z])\d+</span><br><span class="line">这个就表示 匹配以“任意字符连着一个小写字母”开头的数字，只匹配数字。</span><br><span class="line">正则表达式的其他模式修饰符的用法</span><br><span class="line"><span class="number">3</span>、(?=a)：</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"我是中国人"</span>.replace(<span class="regexp">/我是(?=中国)/</span>, <span class="string">"rr"</span>))</span><br><span class="line">打印出：rr中国人    （匹配的是中国前面的<span class="string">'我是'</span>）</span><br><span class="line"><span class="number">4</span>、(?!a)：</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"我是中国人"</span>.replace(<span class="regexp">/(?!中国)/</span>, <span class="string">"rr"</span>))</span><br><span class="line">打印出：rr我是中国人  </span><br><span class="line"><span class="number">5</span>、(?:a)：</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"我是中国人"</span>.replace(<span class="regexp">/(?:中国)/</span>, <span class="string">"rr"</span>))</span><br><span class="line">打印出：我是rr人</span><br><span class="line"><span class="number">6</span>、(?&lt;=a)：</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"我是中国人"</span>.replace(<span class="regexp">/(?&lt;=中国)人/</span>, <span class="string">"rr"</span>))</span><br><span class="line">打印出：我是中国rr</span><br><span class="line"><span class="number">7</span>、(?&lt;!a)：</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"我是中国人"</span>.replace(<span class="regexp">/(?&lt;!中国)/</span>, <span class="string">"rr"</span>))</span><br><span class="line">打印出：rr我是中国人</span><br></pre></td></tr></table></figure>
<p>再举个好例子~</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">^(?![^a-zA-Z]+$)(?!\D+$)[<span class="number">0</span><span class="number">-9</span>a-zA-Z]&#123;<span class="number">6</span>,<span class="number">35</span>&#125;$</span><br><span class="line"></span><br><span class="line">^ (?![^a-zA-Z]+$)  (?!\D+$)  [<span class="number">0</span><span class="number">-9</span>a-zA-Z]  &#123;<span class="number">6</span>,<span class="number">35</span>&#125;  $</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> ^匹配字符串开始（或行首）</span><br><span class="line"><span class="number">2.</span> (?![^a-zA-Z]+$)</span><br><span class="line">此位置后,字符串结尾之前,所有的字符不能全部由数字（[^a-zA-Z]表示非英文字母,结合下文,这里匹配数字）组成.</span><br><span class="line">由于当前位置是字符串开始,所以表示整个字符串不能全是数字.</span><br><span class="line">(?!exp)表示断言之后的内容不能是exp,[^a-zA-Z]表示非英文字母,+表示可以有多个,$匹配结尾.</span><br><span class="line"><span class="number">3.</span> (?!\D+$)</span><br><span class="line">此处用法和<span class="number">2</span>相同,\D表示非数字,即英文(不是数字，就是英文).</span><br><span class="line"><span class="number">4.</span> [<span class="number">0</span><span class="number">-9</span>a-zA-Z]&#123;<span class="number">6</span>,<span class="number">35</span>&#125;</span><br><span class="line">表示匹配整个字符串由  <span class="number">6</span>~<span class="number">35</span>位  数字和字母组成</span><br><span class="line"><span class="number">5.</span> $</span><br><span class="line">匹配字符串结束（或行尾）</span><br><span class="line">结论：^ (?![^a-zA-Z]+$)  (?!\D+$)  [<span class="number">0</span><span class="number">-9</span>a-zA-Z]  &#123;<span class="number">6</span>,<span class="number">35</span>&#125;  $</span><br><span class="line">这是一个匹配<span class="number">6</span>~<span class="number">35</span>位由数字和字母混合而成的密码的正则表达式.</span><br><span class="line">/^[A-Za-z_][A-Za-z0<span class="number">-9</span>_]&#123;<span class="number">5</span>,<span class="number">15</span>&#125;$/</span><br><span class="line">/^$/ :完整表达式</span><br><span class="line">^ :表示以什么开始，或者取反</span><br><span class="line">$ :结束</span><br><span class="line">^[A-Za-z_] : 以字母开始，无论大小都可以；</span><br><span class="line">[^A-Za-z_] :非字母就可以；</span><br><span class="line">[A-Za-z0<span class="number">-9</span>_] ：可以是字母数、字下、划线</span><br><span class="line">&#123;<span class="number">5</span>,<span class="number">15</span>&#125; ：可以包含<span class="number">6</span>到<span class="number">16</span>个字符</span><br><span class="line">.match()  <span class="comment">//匹配</span></span><br><span class="line">例如：</span><br><span class="line"><span class="keyword">var</span> username = <span class="regexp">/^[A-Za-z_][A-Za-z0-9_]&#123;5,15&#125;$/</span>;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"a45612fd"</span>;</span><br><span class="line">name.match(username);</span><br></pre></td></tr></table></figure>


<blockquote>
<p>一、校验数字的js正则表达式</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">1</span> 数字：^[<span class="number">0</span><span class="number">-9</span>]*$</span><br><span class="line"></span><br><span class="line"> <span class="number">2</span> n位的数字：^\d&#123;n&#125;$</span><br><span class="line"></span><br><span class="line"> <span class="number">3</span> 至少n位的数字：^\d&#123;n,&#125;$</span><br><span class="line"></span><br><span class="line"> <span class="number">4</span> m-n位的数字：^\d&#123;m,n&#125;$</span><br><span class="line"></span><br><span class="line"> <span class="number">5</span> 零和非零开头的数字：^(<span class="number">0</span>|[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*)$</span><br><span class="line"></span><br><span class="line"> <span class="number">6</span> 非零开头的最多带两位小数的数字：^([<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*)+(.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)?$</span><br><span class="line"></span><br><span class="line"> <span class="number">7</span> 带<span class="number">1</span><span class="number">-2</span>位小数的正数或负数：^(\-)?\d+(\.\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;)?$</span><br><span class="line"></span><br><span class="line"> <span class="number">8</span> 正数、负数、和小数：^(\-|\+)?\d+(\.\d+)?$</span><br><span class="line"></span><br><span class="line"> <span class="number">9</span> 有两位小数的正实数：^[<span class="number">0</span><span class="number">-9</span>]+(.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">2</span>&#125;)?$</span><br><span class="line"></span><br><span class="line"><span class="number">10</span> 有<span class="number">1</span>~<span class="number">3</span>位小数的正实数：^[<span class="number">0</span><span class="number">-9</span>]+(.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">1</span>,<span class="number">3</span>&#125;)?$</span><br><span class="line"></span><br><span class="line"><span class="number">11</span> 非零的正整数：^[<span class="number">1</span><span class="number">-9</span>]\d*$ 或 ^([<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*)&#123;<span class="number">1</span>,<span class="number">3</span>&#125;$ 或 ^\+?[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*$</span><br><span class="line"></span><br><span class="line"><span class="number">12</span> 非零的负整数：^\-[<span class="number">1</span><span class="number">-9</span>][]<span class="number">0</span><span class="number">-9</span><span class="string">"*$ 或 ^-[1-9]\d*$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">13 非负整数：^\d+$ 或 ^[1-9]\d*|0$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">14 非正整数：^-[1-9]\d*|0$ 或 ^((-\d+)|(0+))$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">15 非负浮点数：^\d+(\.\d+)?$ 或 ^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">16 非正浮点数：^((-\d+(\.\d+)?)|(0+(\.0+)?))$ 或 ^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">17 正浮点数：^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ 或 ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">18 负浮点数：^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ 或 ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">19 浮点数：^(-?\d+)(\.\d+)?$ 或 ^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p> 二、校验字符的js正则表达式</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">1</span> 汉字：^[\u4e00-\u9fa5]&#123;<span class="number">0</span>,&#125;$</span><br><span class="line"></span><br><span class="line"> <span class="number">2</span> 英文和数字：^[A-Za-z0<span class="number">-9</span>]+$ 或 ^[A-Za-z0<span class="number">-9</span>]&#123;<span class="number">4</span>,<span class="number">40</span>&#125;$</span><br><span class="line"></span><br><span class="line"> <span class="number">3</span> 长度为<span class="number">3</span><span class="number">-20</span>的所有字符：^.&#123;<span class="number">3</span>,<span class="number">20</span>&#125;$</span><br><span class="line"></span><br><span class="line"> <span class="number">4</span> 由<span class="number">26</span>个英文字母组成的字符串：^[A-Za-z]+$</span><br><span class="line"></span><br><span class="line"> <span class="number">5</span> 由<span class="number">26</span>个大写英文字母组成的字符串：^[A-Z]+$</span><br><span class="line"></span><br><span class="line"> <span class="number">6</span> 由<span class="number">26</span>个小写英文字母组成的字符串：^[a-z]+$</span><br><span class="line"></span><br><span class="line"> <span class="number">7</span> 由数字和<span class="number">26</span>个英文字母组成的字符串：^[A-Za-z0<span class="number">-9</span>]+$</span><br><span class="line"></span><br><span class="line"> <span class="number">8</span> 由数字、<span class="number">26</span>个英文字母或者下划线组成的字符串：^\w+$ 或 ^\w&#123;<span class="number">3</span>,<span class="number">20</span>&#125;$</span><br><span class="line"></span><br><span class="line"> <span class="number">9</span> 中文、英文、数字包括下划线：^[\u4E00-\u9FA5A-Za-z0<span class="number">-9</span>_]+$</span><br><span class="line"></span><br><span class="line"><span class="number">10</span> 中文、英文、数字但不包括下划线等符号：^[\u4E00-\u9FA5A-Za-z0<span class="number">-9</span>]+$ 或 ^[\u4E00-\u9FA5A-Za-z0<span class="number">-9</span>]&#123;<span class="number">2</span>,<span class="number">20</span>&#125;$</span><br><span class="line"></span><br><span class="line"><span class="number">11</span> 可以输入含有^%&amp;<span class="string">',;=?$\"等字符：[^%&amp;'</span>,;=?$\x22]+</span><br><span class="line"></span><br><span class="line"><span class="number">12</span> 禁止输入含有~的字符：[^~\x22]+</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 三、特殊需求js正则表达式</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">1</span> Email邮箱地址：^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$  </span><br><span class="line"> 另外一个：  /^[A-Za-z0<span class="number">-9.</span>_%-]+@([A-Za-z0<span class="number">-9</span>-]+\.)+[A-Za-z]&#123;<span class="number">2</span>,<span class="number">4</span>&#125;$/</span><br><span class="line"></span><br><span class="line"> <span class="number">2</span> url域名：[a-zA-Z0<span class="number">-9</span>][-a-zA-Z0<span class="number">-9</span>]&#123;<span class="number">0</span>,<span class="number">62</span>&#125;(<span class="regexp">/.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+/</span>.?</span><br><span class="line"></span><br><span class="line"> <span class="number">3</span> InternetURL：[a-zA-z]+:<span class="comment">//[^\s]* 或 ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$</span></span><br><span class="line"></span><br><span class="line"> <span class="number">4</span> 手机号码：^(<span class="number">13</span>[<span class="number">0</span><span class="number">-9</span>]|<span class="number">14</span>[<span class="number">5</span>|<span class="number">7</span>]|<span class="number">15</span>[<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">5</span>|<span class="number">6</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>]|<span class="number">18</span>[<span class="number">0</span>|<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|<span class="number">5</span>|<span class="number">6</span>|<span class="number">7</span>|<span class="number">8</span>|<span class="number">9</span>])\d&#123;<span class="number">8</span>&#125;$ </span><br><span class="line">  另外一个：/^<span class="number">1</span>[<span class="number">3</span>|<span class="number">4</span>|<span class="number">5</span>|<span class="number">7</span>|<span class="number">8</span>]\d&#123;<span class="number">9</span>&#125;$/</span><br><span class="line"></span><br><span class="line"> <span class="number">5</span> 电话号码(<span class="string">"XXX-XXXXXXX"</span>、<span class="string">"XXXX-XXXXXXXX"</span>、<span class="string">"XXX-XXXXXXX"</span>、<span class="string">"XXX-XXXXXXXX"</span>、<span class="string">"XXXXXXX"</span>和<span class="string">"XXXXXXXX)：</span></span><br><span class="line"><span class="string">       ^(\(\d&#123;3,4&#125;-)|\d&#123;3.4&#125;-)?\d&#123;7,8&#125;$ </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 6 国内电话号码(0511-4405222、021-87888822)：\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 7 身份证号：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">15或18位身份证：^\d&#123;15&#125;|\d&#123;18&#125;$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">15位身份证：^[1-9]\d&#123;7&#125;((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d&#123;3&#125;$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">18位身份证：^[1-9]\d&#123;5&#125;[1-9]\d&#123;3&#125;((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d&#123;4&#125;$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 8 短身份证号码(数字、字母x结尾)：^([0-9])&#123;7,18&#125;(x|X)?$ 或 ^\d&#123;8,18&#125;|[0-9x]&#123;8,18&#125;|[0-9X]&#123;8,18&#125;?$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 9 帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">10 密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w&#123;5,17&#125;$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">10.1          6位数数字密码强匹配^\d&#123;6&#125;$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">11 强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：</span></span><br><span class="line"><span class="string">^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).&#123;8,10&#125;$  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">12 日期格式：^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">13 一年的12个月(01～09和1～12)：^(0?[1-9]|1[0-2])$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">14 一个月的31天(01～09和1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$ </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 钱的输入格式：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 1.有四种钱的表示形式我们可以接受:"</span><span class="number">10000.00</span><span class="string">" 和 "</span><span class="number">10</span>,<span class="number">000.00</span><span class="string">", 和没有 "</span>分<span class="string">" 的 "</span><span class="number">10000</span><span class="string">" 和 "</span><span class="number">10</span>,<span class="number">000</span><span class="string">"：^[1-9][0-9]*$ </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 2.这表示任意一个不以0开头的数字,但是,这也意味着一个字符"</span><span class="number">0</span><span class="string">"不通过,所以我们采用下面的形式：^(0|[1-9][0-9]*)$ </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 3.一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：^(0|-?[1-9][0-9]*)$ </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 4.这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧.</span></span><br><span class="line"><span class="string"> 敲重点！小数部分：^[0-9]+(.[0-9]+)?$ </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 5.必须说明的是,小数点后面至少应该有1位数,所以"</span><span class="number">10.</span><span class="string">"是不通过的,但是 "</span><span class="number">10</span><span class="string">" 和 "</span><span class="number">10.2</span><span class="string">" 是通过的：^[0-9]+(.[0-9]&#123;2&#125;)?$ </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 6.规定小数点后面必须有两位,可以这样：^[0-9]+(.[0-9]&#123;1,2&#125;)?$ </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 7.允许用户只写一位小数.可以这样：^[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*(.[0-9]&#123;1,2&#125;)?$ </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 8.  1到3个数字,后面跟着任意个逗号+3个数字,逗号成为可选,而不是必须：^([0-9]+|[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*)(.[0-9]&#123;1,2&#125;)?$ </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 9.最后,别忘了在用函数时去掉那个反斜杠,一般的错误都在这里。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 10 xml文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 11 中文字符的正则表达式：[\u4e00-\u9fa5]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 12 双字节字符：[^\x00-\xff]    (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 13 空白行的正则表达式：\n\s*\r    (可以用来删除空白行)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 14  HTML标记的正则表达式：&lt;(\S*?)[^&gt;]*&gt;.*?&lt;/\1&gt;|&lt;.*? /&gt;   </span></span><br><span class="line"><span class="string">  (网上流传的版本不太好，上面这个也仅仅能部分匹配，对于复杂的嵌套标记依旧无能为力)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 15 首尾空白字符的正则表达式：^\s*|\s*$或(^\s*)|(\s*$)    (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 16 腾讯QQ号：[1-9][0-9]&#123;4,&#125;    (腾讯QQ号从10000开始)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 17 中国邮政编码：[1-9]\d&#123;5&#125;(?!\d)    (中国邮政编码为6位数字)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 18 IP地址：\d+\.\d+\.\d+\.\d+    (提取IP地址时有用)</span></span><br><span class="line"><span class="string"> 19 不能为空：/\S/</span></span><br><span class="line"><span class="string"> 20 匹配空行：^(\s*)\n</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>四、特殊正则</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">去除html标签</span><br><span class="line">注意：为方便查看，再对结果中的html空格占位符 &amp;nbsp;进行替换为空格即可。</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> reg= <span class="regexp">/&lt;[^&gt;]*&gt;/ig</span>;<span class="comment">//*代表0次及以上</span></span><br><span class="line">            <span class="keyword">var</span> reg2= <span class="regexp">/&lt;[^&gt;]+&gt;/ig</span>;<span class="comment">//+代表1次及以上</span></span><br><span class="line">            <span class="keyword">var</span> num=<span class="string">'&lt;h4&gt;sss&lt;span&gt;AAA&lt;/span&gt;&lt;&gt;&lt;&gt;&lt;/h5&gt;'</span>;</span><br><span class="line">            alert(num.replace(reg,<span class="string">""</span>));<span class="comment">//sssAAA</span></span><br><span class="line">            alert(num.replace(reg2,<span class="string">""</span>));<span class="comment">//sssAAA&lt;&gt;&lt;&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面列举了一些我试过的，下面这篇文章讲的很有用，大家需要可以点击链接学习~</p>
<p><a href="https://www.jb51.net/article/180954.htm" target="_blank" rel="noopener">js处理网页编辑器转义、去除转义、去除HTML标签的正则</a></p>

      
      <!-- reward -->
      
      <div id="reward-btn">
        打赏
      </div>
      
    </div>
    
    
      <!-- copyright -->
      
        <div class="declare">
          <ul class="post-copyright">
            <li>
              <i class="ri-copyright-line"></i>
              <strong>版权声明： </strong s>
              本博客所有文章除特别声明外，均采用 <a href="https://www.apache.org/licenses/LICENSE-2.0.html" rel="external nofollow"
                target="_blank">Apache License 2.0</a> 许可协议。转载请注明出处！
            </li>
          </ul>
        </div>
        
    <footer class="article-footer">
      
          
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://yoursite.com/2020/05/03/%E5%91%A8%E6%9C%AB%E5%A4%8D%E4%B9%A0%E6%80%BB%E7%BB%93%EF%BC%88%E4%BA%8C%EF%BC%89%E2%80%94%E2%80%94%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%B3%BB%E5%88%97/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../../tags/%E5%B8%B8%E7%94%A8%E9%9C%80%E6%B1%82%E6%B1%87%E6%80%BB/" rel="tag">常用需求汇总</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../../tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" rel="tag">数据结构与算法</a></li></ul>


    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="../../04/CSS3%E6%96%B0%E7%89%B9%E6%80%A7+%E5%A4%8D%E4%B9%A0%E8%B5%84%E6%96%99%E6%95%B4%E7%90%86%E6%B1%87%E6%80%BB/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            CSS3新特性+复习资料整理汇总
          
        </div>
      </a>
    
    
      <a href="../../02/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">前端开发规范笔记（阿里）</div>
      </a>
    
  </nav>


  

  
  
<!-- valine评论 -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        app_id: '',
        app_key: '',
        path: window.location.pathname,
        notify: 'false',
        verify: 'false',
        avatar: 'mp',
        placeholder: '给我的文章加点评论吧~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
  

</article>
</section>
      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2020
        Wangqiuxia
      </li>
      <li>
        
        Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
    <aside class="sidebar">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="../../../../index.html"><img src="/images/ayer-side.svg" alt="爱产品，爱前端！"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../index.html">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../tags/%E6%8A%80%E6%9C%AF/">小程序</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../http:/shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="../../../../https:/v.xiumi.us/stage/v5/4IeLH/197507179">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="../../../../atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="../../../../images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="../../../../images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="../../../../js/jquery-2.0.3.min.js"></script>


<script src="../../../../js/jquery.justifiedGallery.min.js"></script>


<script src="../../../../js/lazyload.min.js"></script>


<script src="../../../../js/busuanzi-2.3.pure.min.js"></script>


<script src="../../../../js/share.js"></script>



<script src="../../../../fancybox/jquery.fancybox.min.js"></script>




<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['做一个有情怀懂产品的程序媛！','业精于勤荒于嬉！行成于思毁于随！','越努力越幸运'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script src="../../../../js/tocbot.min.js"></script>

<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer:'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    onClick: (e) => {
      $('.toc-link').removeClass('is-active-link');
      $(`a[href=${e.target.hash}]`).addClass('is-active-link');
      $(e.target.hash).scrollIntoView();
      return false;
    }
  });
</script>


<script>
  var ayerConfig = {
    mathjax: false
  }
</script>


<script src="../../../../js/ayer.js"></script>


<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>

    
    <div id="music">
    
    
    
    <iframe frameborder="no" border="1" marginwidth="0" marginheight="0" width="200" height="52"
        src="//music.163.com/outchain/player?type=2&id=1436709403&auto=1&height=32"></iframe>
</div>

<style>
    #music {
        position: fixed;
        right: 15px;
        bottom: 0;
        z-index: 998;
    }
</style>
    
  </div>
</body>

</html>